{"ast":null,"code":"import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport React, { cloneElement, Component, useRef, useEffect, useCallback, useLayoutEffect, useReducer, useMemo } from 'react';\nimport { isForwardRef } from 'react-is';\nimport { compute } from 'compute-scroll-into-view';\nimport { __assign } from 'tslib';\nvar idCounter = 0;\n\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\nfunction noop() {}\n\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n  var actions = compute(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n      top = _ref.top,\n      left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @param {Window} environment The window context where downshift renders.\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\nfunction isOrContainsNode(parent, child, environment) {\n  var result = parent === child || child instanceof environment.Node && parent.contains && parent.contains(child);\n  return result;\n}\n\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\nfunction debounce(fn, time) {\n  var timeoutId;\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\nfunction generateId() {\n  return String(idCounter++);\n}\n\n/**\n * Resets idCounter to 0. Used for SSR.\n */\nfunction resetIdCounter() {\n  // istanbul ignore next\n  if ('useId' in React) {\n    console.warn(\"It is not necessary to call resetIdCounter when using React 18+\");\n    return;\n  }\n  idCounter = 0;\n}\n\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specify if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\nfunction getA11yStatusMessage$1(_ref2) {\n  var isOpen = _ref2.isOpen,\n    resultCount = _ref2.resultCount,\n    previousResultCount = _ref2.previousResultCount;\n  if (!isOpen) {\n    return '';\n  }\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n  return '';\n}\n\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ? /* istanbul ignore next (preact) */arg[0] : arg;\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\nfunction getElementProps(element) {\n  return element.props;\n}\n\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\nfunction getState(state, props) {\n  if (!state || !props) {\n    return state;\n  }\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n    keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n  return key;\n}\n\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n\n/**\n * Returns the next non-disabled highlightedIndex value.\n *\n * @param {number} start The current highlightedIndex.\n * @param {number} offset The offset from the current highlightedIndex to start searching.\n * @param {unknown[]} items The items array.\n * @param {(item: unknown, index: number) => boolean} isItemDisabled Function that tells if an item is disabled or not.\n * @param {boolean?} circular If the search reaches the end, if it can search again starting from the other end.\n * @returns {number} The next highlightedIndex.\n */\nfunction getHighlightedIndex(start, offset, items, isItemDisabled, circular) {\n  if (circular === void 0) {\n    circular = false;\n  }\n  var count = items.length;\n  if (count === 0) {\n    return -1;\n  }\n  var itemsLastIndex = count - 1;\n  if (typeof start !== 'number' || start < 0 || start > itemsLastIndex) {\n    start = offset > 0 ? -1 : itemsLastIndex + 1;\n  }\n  var current = start + offset;\n  if (current < 0) {\n    current = circular ? itemsLastIndex : 0;\n  } else if (current > itemsLastIndex) {\n    current = circular ? 0 : itemsLastIndex;\n  }\n  var highlightedIndex = getNonDisabledIndex(current, offset < 0, items, isItemDisabled, circular);\n  if (highlightedIndex === -1) {\n    return start >= count ? -1 : start;\n  }\n  return highlightedIndex;\n}\n\n/**\n * Returns the next non-disabled highlightedIndex value.\n *\n * @param {number} start The current highlightedIndex.\n * @param {boolean} backwards If true, it will search backwards from the start.\n * @param {unknown[]} items The items array.\n * @param {(item: unknown, index: number) => boolean} isItemDisabled Function that tells if an item is disabled or not.\n * @param {boolean} circular If the search reaches the end, if it can search again starting from the other end.\n * @returns {number} The next non-disabled index.\n */\nfunction getNonDisabledIndex(start, backwards, items, isItemDisabled, circular) {\n  if (circular === void 0) {\n    circular = false;\n  }\n  var count = items.length;\n  if (backwards) {\n    for (var index = start; index >= 0; index--) {\n      if (!isItemDisabled(items[index], index)) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = start; _index < count; _index++) {\n      if (!isItemDisabled(items[_index], _index)) {\n        return _index;\n      }\n    }\n  }\n  if (circular) {\n    return getNonDisabledIndex(backwards ? count - 1 : 0, backwards, items, isItemDisabled);\n  }\n  return -1;\n}\n\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Window} environment The window context where downshift renders.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\nfunction targetWithinDownshift(target, downshiftElements, environment, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n  return environment && downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target, environment) || checkActiveElement && isOrContainsNode(contextNode, environment.document.activeElement, environment));\n  });\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validateControlledUnchanged = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validateControlledUnchanged = function validateControlledUnchanged(state, prevProps, nextProps) {\n    var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n    Object.keys(state).forEach(function (propKey) {\n      if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n      } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n      }\n    });\n  };\n}\nvar cleanupStatus = debounce(function (documentProp) {\n  getStatusDiv(documentProp).textContent = '';\n}, 500);\n\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\nfunction getStatusDiv(documentProp) {\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n  if (statusDiv) {\n    return statusDiv;\n  }\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\nfunction setStatus(status, documentProp) {\n  if (!status || !documentProp) {\n    return;\n  }\n  var div = getStatusDiv(documentProp);\n  div.textContent = status;\n  cleanupStatus(documentProp);\n}\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\nvar _excluded$4 = [\"refKey\", \"ref\"],\n  _excluded2$3 = [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"],\n  _excluded3$2 = [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"],\n  _excluded4$2 = [\"refKey\", \"ref\"],\n  _excluded5 = [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"];\nvar Downshift = /*#__PURE__*/function () {\n  var Downshift = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n    function Downshift(_props) {\n      var _this;\n      _this = _Component.call(this, _props) || this;\n      // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n      _this.items = [];\n      // itemCount can be changed asynchronously\n      // from within downshift (so it can't come from a prop)\n      // this is why we store it as an instance and use\n      // getItemCount rather than just use items.length\n      // (to support windowing + async)\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n      /**\n       * @param {Function} fn the function to call after the time\n       * @param {Number} time the time to wait\n       */\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n        _this.timeoutIds.push(id);\n      };\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n      _this.isItemDisabled = function (_item, index) {\n        var currentElementNode = _this.getItemNodeFromIndex(index);\n        return currentElementNode && currentElementNode.hasAttribute('disabled');\n      };\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n        if (item == null) {\n          return;\n        }\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n      // any piece of our state can live in two places:\n      // 1. Uncontrolled: it's internal (this.state)\n      //    We will call this.setState to update that state\n      // 2. Controlled: it's external (this.props)\n      //    We will call this.props.onStateChange to update that state\n      //\n      // In addition, we'll call this.props.onChange if the\n      // selectedItem is changed.\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function';\n\n        // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n        }\n        return _this.setState(function (state) {\n          var _newStateToSet;\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet;\n\n          // Your own function that could modify the state that will be set.\n          newStateToSet = _this.props.stateReducer(state, newStateToSet);\n\n          // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem');\n          // this keeps track of the object we want to call with setState\n          var nextState = {};\n          // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n          (_newStateToSet = newStateToSet).type || (_newStateToSet.type = unknown);\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            }\n            // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n            if (key === 'type') {\n              return;\n            }\n            newStateToSet[key];\n            // if it's coming from props, then we don't care to set it internally\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          });\n\n          // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n          }\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)();\n\n          // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          }\n          // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n      //////////////////////////// ROOT\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n        var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, _excluded$4);\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n        // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n        var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : undefined, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ROOT\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n          event.preventDefault();\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                  highlightedIndex = _this2$getState.highlightedIndex;\n                var nextHighlightedIndex = getHighlightedIndex(highlightedIndex, 1, {\n                  length: itemCount\n                }, _this2.isItemDisabled, true);\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n          event.preventDefault();\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                  highlightedIndex = _this3$getState.highlightedIndex;\n                var nextHighlightedIndex = getHighlightedIndex(highlightedIndex, -1, {\n                  length: itemCount\n                }, _this3.isItemDisabled, true);\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n          var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset(_extends({\n            type: keyDownEscape\n          }, !this.state.isOpen && {\n            selectedItem: null,\n            inputValue: ''\n          }));\n        }\n      };\n      //////////////////////////// BUTTON\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this$getState3 = this.getState(),\n            isOpen = _this$getState3.isOpen;\n          if (!isOpen) {\n            return;\n          }\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          }\n\n          // get next non-disabled starting downwards from 0 if that's disabled.\n          var newHighlightedIndex = getNonDisabledIndex(0, false, {\n            length: itemCount\n          }, this.isItemDisabled);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this$getState4 = this.getState(),\n            isOpen = _this$getState4.isOpen;\n          if (!isOpen) {\n            return;\n          }\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          }\n\n          // get next non-disabled starting upwards from last index if that's disabled.\n          var newHighlightedIndex = getNonDisabledIndex(itemCount - 1, true, {\n            length: itemCount\n          }, this.isItemDisabled);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick;\n        _ref3.onPress;\n        var onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$3);\n        var _this$getState5 = _this.getState(),\n          isOpen = _this$getState5.isOpen;\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, rest);\n      };\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault();\n        // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n        /* istanbul ignore if (can't reasonably test this) */\n        if (_this.props.environment) {\n          var _this$props$environme = _this.props.environment.document,\n            body = _this$props$environme.body,\n            activeElement = _this$props$environme.activeElement;\n          if (body && body === activeElement) {\n            event.target.focus();\n          }\n        }\n        // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n        _this.internalSetTimeout(function () {\n          if (_this.isMouseDown || !_this.props.environment) {\n            return;\n          }\n          var activeElement = _this.props.environment.document.activeElement;\n          if ((activeElement == null || activeElement.id !== _this.inputId) && activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n        });\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ BUTTON\n      /////////////////////////////// LABEL\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ LABEL\n      /////////////////////////////// INPUT\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput;\n        _ref4.onChangeText;\n        var rest = _objectWithoutPropertiesLoose(_ref4, _excluded3$2);\n        var onChangeKey;\n        var eventHandlers = {};\n\n        /* istanbul ignore next (preact) */\n        {\n          onChangeKey = 'onChange';\n        }\n        var _this$getState6 = _this.getState(),\n          inputValue = _this$getState6.inputValue,\n          isOpen = _this$getState6.isOpen,\n          highlightedIndex = _this$getState6.highlightedIndex;\n        if (!rest.disabled) {\n          var _eventHandlers;\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : undefined,\n          'aria-controls': isOpen ? _this.menuId : undefined,\n          'aria-labelledby': rest && rest['aria-label'] ? undefined : _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, rest);\n      };\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var _activeElement$datase;\n          if (_this.isMouseDown || !_this.props.environment) {\n            return;\n          }\n          var activeElement = _this.props.environment.document.activeElement;\n          var downshiftButtonIsActive = (activeElement == null || (_activeElement$datase = activeElement.dataset) == null ? void 0 : _activeElement$datase.toggle) && _this._rootNode && _this._rootNode.contains(activeElement);\n          if (!downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ INPUT\n      /////////////////////////////// MENU\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, _excluded4$2);\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? undefined : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ MENU\n      /////////////////////////////// ITEM\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick;\n        _ref7.onPress;\n        var index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ? /* istanbul ignore next */undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, _excluded5);\n        if (index === undefined) {\n          _this.items.push(item);\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            });\n\n            // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n            _this.avoidScrolling = true;\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers);\n\n        // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, rest);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ITEM\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n            isOpen = _this$getState7.isOpen,\n            highlightedIndex = _this$getState7.highlightedIndex;\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n          cbToCb(cb)();\n        });\n      };\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n      _this.updateStatus = debounce(function () {\n        var _this$props;\n        if (!((_this$props = _this.props) != null && (_this$props = _this$props.environment) != null && _this$props.document)) {\n          return;\n        }\n        var state = _this.getState();\n        var item = _this.items[state.highlightedIndex];\n        var resultCount = _this.getItemCount();\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n      var _this$props2 = _this.props,\n        defaultHighlightedIndex = _this$props2.defaultHighlightedIndex,\n        _this$props2$initialH = _this$props2.initialHighlightedIndex,\n        _highlightedIndex = _this$props2$initialH === void 0 ? defaultHighlightedIndex : _this$props2$initialH,\n        defaultIsOpen = _this$props2.defaultIsOpen,\n        _this$props2$initialI = _this$props2.initialIsOpen,\n        _isOpen = _this$props2$initialI === void 0 ? defaultIsOpen : _this$props2$initialI,\n        _this$props2$initialI2 = _this$props2.initialInputValue,\n        _inputValue = _this$props2$initialI2 === void 0 ? '' : _this$props2$initialI2,\n        _this$props2$initialS = _this$props2.initialSelectedItem,\n        _selectedItem = _this$props2$initialS === void 0 ? null : _this$props2$initialS;\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n      _this.state = _state;\n      return _this;\n    }\n    var _proto = Downshift.prototype;\n    /**\n     * Clear all running timeouts\n     */\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */;\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n      return getState(stateToMerge, this.props);\n    };\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n      return itemCount;\n    };\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment ? this.props.environment.document.getElementById(this.getItemId(index)) : null;\n    };\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var itemCount = this.getItemCount();\n      var _this$getState8 = this.getState(),\n        highlightedIndex = _this$getState8.highlightedIndex;\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getHighlightedIndex(highlightedIndex, amount, {\n          length: itemCount\n        }, this.isItemDisabled, true);\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n        highlightedIndex = _this$getState9.highlightedIndex,\n        inputValue = _this$getState9.inputValue,\n        selectedItem = _this$getState9.selectedItem,\n        isOpen = _this$getState9.isOpen;\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    };\n    _proto.componentDidMount = function componentDidMount() {\n      var _this4 = this;\n      /* istanbul ignore if (react-native) */\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n\n      /* istanbul ignore if (react-native or SSR) */\n      if (!this.props.environment) {\n        this.cleanup = function () {\n          _this4.internalClearTimeouts();\n        };\n      } else {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function onMouseDown() {\n          _this4.isMouseDown = true;\n        };\n        var onMouseUp = function onMouseUp(event) {\n          _this4.isMouseDown = false;\n          // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this4._rootNode, _this4._menuNode], _this4.props.environment);\n          if (!contextWithinDownshift && _this4.getState().isOpen) {\n            _this4.reset({\n              type: mouseUp\n            }, function () {\n              return _this4.props.onOuterClick(_this4.getStateAndHelpers());\n            });\n          }\n        };\n        // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n        var onTouchStart = function onTouchStart() {\n          _this4.isTouchMove = false;\n        };\n        var onTouchMove = function onTouchMove() {\n          _this4.isTouchMove = true;\n        };\n        var onTouchEnd = function onTouchEnd(event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this4._rootNode, _this4._menuNode], _this4.props.environment, false);\n          if (!_this4.isTouchMove && !contextWithinDownshift && _this4.getState().isOpen) {\n            _this4.reset({\n              type: touchEnd\n            }, function () {\n              return _this4.props.onOuterClick(_this4.getStateAndHelpers());\n            });\n          }\n        };\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n        this.cleanup = function () {\n          _this4.internalClearTimeouts();\n          _this4.updateStatus.cancel();\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref10.highlightedIndex;\n      var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref11.highlightedIndex;\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      var scrollWhenNavigating = currentHighlightedIndex !== prevHighlightedIndex;\n      return scrollWhenOpen || scrollWhenNavigating;\n    };\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n        if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n\n      /* istanbul ignore else (react-native) */\n      {\n        this.updateStatus();\n      }\n    };\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop);\n      // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n      this.clearItems();\n      // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined;\n      // we do something similar for getMenuProps\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined;\n      // we do something similar for getLabelProps\n      this.getLabelProps.called = false;\n      // and something similar for getInputProps\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n      if (!element) {\n        return null;\n      }\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return /*#__PURE__*/cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n\n      /* istanbul ignore next */\n      return undefined;\n    };\n    return Downshift;\n  }(Component);\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage$1,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: /* istanbul ignore next (ssr) */\n    typeof window === 'undefined' || false ? undefined : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes$3;\n  return Downshift;\n}();\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func.isRequired,\n    removeEventListener: PropTypes.func.isRequired,\n    document: PropTypes.shape({\n      createElement: PropTypes.func.isRequired,\n      getElementById: PropTypes.func.isRequired,\n      activeElement: PropTypes.any.isRequired,\n      body: PropTypes.any.isRequired\n    }).isRequired,\n    Node: PropTypes.func.isRequired\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n} : void 0;\nvar Downshift$1 = Downshift;\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\nvar _excluded$3 = [\"highlightedIndex\", \"items\", \"environment\"];\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n    type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, action, state, newState);\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\nfunction invokeOnChangeHandler(key, action, state, newState) {\n  var props = action.props,\n    type = action.type;\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](_extends({\n      type: type\n    }, newState));\n  }\n}\n\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n    itemToString = selectionParameters.itemToString;\n  return selectedItem ? itemToString(selectedItem) + \" has been selected.\" : '';\n}\n\n/**\n * Debounced call for updating the a11y message.\n */\nvar updateA11yStatus = debounce(function (getA11yMessage, document) {\n  setStatus(getA11yMessage(), document);\n}, 200);\n\n// istanbul ignore next\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\n// istanbul ignore next\nvar useElementIds = 'useId' in React // Avoid conditional useId call\n? function useElementIds(_ref) {\n  var id = _ref.id,\n    labelId = _ref.labelId,\n    menuId = _ref.menuId,\n    getItemId = _ref.getItemId,\n    toggleButtonId = _ref.toggleButtonId,\n    inputId = _ref.inputId;\n  // Avoid conditional useId call\n  var reactId = \"downshift-\" + React.useId();\n  if (!id) {\n    id = reactId;\n  }\n  var elementIdsRef = useRef({\n    labelId: labelId || id + \"-label\",\n    menuId: menuId || id + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return id + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || id + \"-toggle-button\",\n    inputId: inputId || id + \"-input\"\n  });\n  return elementIdsRef.current;\n} : function useElementIds(_ref2) {\n  var _ref2$id = _ref2.id,\n    id = _ref2$id === void 0 ? \"downshift-\" + generateId() : _ref2$id,\n    labelId = _ref2.labelId,\n    menuId = _ref2.menuId,\n    getItemId = _ref2.getItemId,\n    toggleButtonId = _ref2.toggleButtonId,\n    inputId = _ref2.inputId;\n  var elementIdsRef = useRef({\n    labelId: labelId || id + \"-label\",\n    menuId: menuId || id + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return id + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || id + \"-toggle-button\",\n    inputId: inputId || id + \"-input\"\n  });\n  return elementIdsRef.current;\n};\nfunction getItemAndIndex(itemProp, indexProp, items, errorMessage) {\n  var item, index;\n  if (itemProp === undefined) {\n    if (indexProp === undefined) {\n      throw new Error(errorMessage);\n    }\n    item = items[indexProp];\n    index = indexProp;\n  } else {\n    index = indexProp === undefined ? items.indexOf(itemProp) : indexProp;\n    item = itemProp;\n  }\n  return [item, index];\n}\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\nfunction useLatestRef(val) {\n  var ref = useRef(val);\n  // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n  ref.current = val;\n  return ref;\n}\n\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} props The hook props, also passed to createInitialState.\n * @param {Function} createInitialState Function that returns the initial state.\n * @param {Function} isStateEqual Function that checks if a previous state is equal to the next.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useEnhancedReducer(reducer, props, createInitialState, isStateEqual) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n  var _useReducer = useReducer(enhancedReducer, props, createInitialState),\n    state = _useReducer[0],\n    dispatch = _useReducer[1];\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    var prevState = getState(prevStateRef.current, action == null ? void 0 : action.props);\n    var shouldCallOnChangeProps = action && prevStateRef.current && !isStateEqual(prevState, state);\n    if (shouldCallOnChangeProps) {\n      callOnChangeProps(action, prevState, state);\n    }\n    prevStateRef.current = state;\n  }, [state, action, isStateEqual]);\n  return [state, dispatchWithProps];\n}\n\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} props The hook props, also passed to createInitialState.\n * @param {Function} createInitialState Function that returns the initial state.\n * @param {Function} isStateEqual Function that checks if a previous state is equal to the next.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useControlledReducer$1(reducer, props, createInitialState, isStateEqual) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, props, createInitialState, isStateEqual),\n    state = _useEnhancedReducer[0],\n    dispatch = _useEnhancedReducer[1];\n  return [getState(state, props), dispatch];\n}\nvar defaultProps$3 = {\n  itemToString: function itemToString(item) {\n    return item ? String(item) : '';\n  },\n  itemToKey: function itemToKey(item) {\n    return item;\n  },\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  environment: /* istanbul ignore next (ssr) */\n  typeof window === 'undefined' || false ? undefined : window\n};\nfunction getDefaultValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n  var defaultValue = props[\"default\" + capitalizeString(propKey)];\n  if (defaultValue !== undefined) {\n    return defaultValue;\n  }\n  return defaultStateValues[propKey];\n}\nfunction getInitialValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n  var value = props[propKey];\n  if (value !== undefined) {\n    return value;\n  }\n  var initialValue = props[\"initial\" + capitalizeString(propKey)];\n  if (initialValue !== undefined) {\n    return initialValue;\n  }\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\nfunction getInitialState$2(props) {\n  var selectedItem = getInitialValue$1(props, 'selectedItem');\n  var isOpen = getInitialValue$1(props, 'isOpen');\n  var highlightedIndex = getInitialValue$1(props, 'highlightedIndex');\n  var inputValue = getInitialValue$1(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem && isOpen ? props.items.findIndex(function (item) {\n      return props.itemToKey(item) === props.itemToKey(selectedItem);\n    }) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nfunction getHighlightedIndexOnOpen(props, state, offset) {\n  var items = props.items,\n    initialHighlightedIndex = props.initialHighlightedIndex,\n    defaultHighlightedIndex = props.defaultHighlightedIndex,\n    itemToKey = props.itemToKey;\n  var selectedItem = state.selectedItem,\n    highlightedIndex = state.highlightedIndex;\n  if (items.length === 0) {\n    return -1;\n  }\n\n  // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n  if (selectedItem) {\n    return items.findIndex(function (item) {\n      return itemToKey(selectedItem) === itemToKey(item);\n    });\n  }\n  if (offset === 0) {\n    return -1;\n  }\n  return offset < 0 ? items.length - 1 : 0;\n}\n/**\n * Tracks mouse and touch events, such as mouseDown, touchMove and touchEnd.\n *\n * @param {Object} environment The environment to add the event listeners to, for instance window.\n * @param {Array<HTMLElement>} downshiftElementRefs The refs for the element that should not trigger a blur action from mouseDown or touchEnd.\n * @param {Function} handleBlur The function that is called if mouseDown or touchEnd occured outside the downshiftElements.\n * @returns {Object} The mouse and touch events information, if any of are happening.\n */\nfunction useMouseAndTouchTracker(environment, downshiftElementRefs, handleBlur) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false,\n    isTouchEnd: false\n  });\n  useEffect(function () {\n    if (!environment) {\n      return noop;\n    }\n    var downshiftElements = downshiftElementRefs.map(function (ref) {\n      return ref.current;\n    });\n    function onMouseDown() {\n      mouseAndTouchTrackersRef.current.isTouchEnd = false; // reset this one.\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    }\n    function onMouseUp(event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n      if (!targetWithinDownshift(event.target, downshiftElements, environment)) {\n        handleBlur();\n      }\n    }\n    function onTouchStart() {\n      mouseAndTouchTrackersRef.current.isTouchEnd = false;\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    }\n    function onTouchMove() {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    }\n    function onTouchEnd(event) {\n      mouseAndTouchTrackersRef.current.isTouchEnd = true;\n      if (!mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, downshiftElements, environment, false)) {\n        handleBlur();\n      }\n    }\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function cleanup() {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- refs don't change\n  }, [environment, handleBlur]);\n  return mouseAndTouchTrackersRef.current;\n}\n\n/* istanbul ignore next */\n// eslint-disable-next-line import/no-mutable-exports\nvar useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n  return noop;\n};\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n    var isInitialMountRef = useRef(true);\n    for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n      propKeys[_key] = arguments[_key];\n    }\n    var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n      acc[propKey] = {};\n      return acc;\n    }, {}));\n    useEffect(function () {\n      Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n        var propCallInfo = getterPropsCalledRef.current[propKey];\n        if (isInitialMountRef.current) {\n          if (!Object.keys(propCallInfo).length) {\n            // eslint-disable-next-line no-console\n            console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n            return;\n          }\n        }\n        var suppressRefError = propCallInfo.suppressRefError,\n          refKey = propCallInfo.refKey,\n          elementRef = propCallInfo.elementRef;\n        if ((!elementRef || !elementRef.current) && !suppressRefError) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n        }\n      });\n      isInitialMountRef.current = false;\n    });\n    var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }, []);\n    return setGetterPropCallInfo;\n  };\n}\nfunction useA11yMessageSetter(getA11yMessage, dependencyArray, _ref3) {\n  var highlightedIndex = _ref3.highlightedIndex,\n    items = _ref3.items,\n    environment = _ref3.environment,\n    rest = _objectWithoutPropertiesLoose(_ref3, _excluded$3);\n  var isInitialMount = useIsInitialMount();\n  // Sets a11y status message on changes in state.\n  useEffect(function () {\n    if (isInitialMount || false || !(environment != null && environment.document)) {\n      return;\n    }\n    updateA11yStatus(function () {\n      return getA11yMessage(_extends({\n        highlightedIndex: highlightedIndex,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length\n      }, rest));\n    }, environment.document);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencyArray);\n}\nfunction useScrollIntoView(_ref4) {\n  var highlightedIndex = _ref4.highlightedIndex,\n    isOpen = _ref4.isOpen,\n    itemRefs = _ref4.itemRefs,\n    getItemNodeFromIndex = _ref4.getItemNodeFromIndex,\n    menuElement = _ref4.menuElement,\n    scrollIntoViewProp = _ref4.scrollIntoView;\n  // used not to scroll on highlight by mouse.\n  var shouldScrollRef = useRef(true);\n  // Scroll on highlighted item if change comes from keyboard.\n  useIsomorphicLayoutEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoViewProp(getItemNodeFromIndex(highlightedIndex), menuElement);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [highlightedIndex]);\n  return shouldScrollRef;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar useControlPropsValidator = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  useControlPropsValidator = function useControlPropsValidator(_ref5) {\n    var props = _ref5.props,\n      state = _ref5.state;\n    // used for checking when props are moving from controlled to uncontrolled.\n    var prevPropsRef = useRef(props);\n    var isInitialMount = useIsInitialMount();\n    useEffect(function () {\n      if (isInitialMount) {\n        return;\n      }\n      validateControlledUnchanged(state, prevPropsRef.current, props);\n      prevPropsRef.current = props;\n    }, [state, props, isInitialMount]);\n  };\n}\n\n/**\n * Handles selection on Enter / Alt + ArrowUp. Closes the menu and resets the highlighted index, unless there is a highlighted.\n * In that case, selects the item and resets to defaults for open state and highlighted idex.\n * @param {Object} props The useCombobox props.\n * @param {number} highlightedIndex The index from the state.\n * @param {boolean} inputValue Also return the input value for state.\n * @returns The changes for the state.\n */\nfunction getChangesOnSelection(props, highlightedIndex, inputValue) {\n  var _props$items;\n  if (inputValue === void 0) {\n    inputValue = true;\n  }\n  var shouldSelect = ((_props$items = props.items) == null ? void 0 : _props$items.length) && highlightedIndex >= 0;\n  return _extends({\n    isOpen: false,\n    highlightedIndex: -1\n  }, shouldSelect && _extends({\n    selectedItem: props.items[highlightedIndex],\n    isOpen: getDefaultValue$1(props, 'isOpen'),\n    highlightedIndex: getDefaultValue$1(props, 'highlightedIndex')\n  }, inputValue && {\n    inputValue: props.itemToString(props.items[highlightedIndex])\n  }));\n}\n\n/**\n * Check if a state is equal for dropdowns, by comparing isOpen, inputValue, highlightedIndex and selected item.\n * Used by useSelect and useCombobox.\n *\n * @param {Object} prevState\n * @param {Object} newState\n * @returns {boolean} Wheather the states are deeply equal.\n */\nfunction isDropdownsStateEqual(prevState, newState) {\n  return prevState.isOpen === newState.isOpen && prevState.inputValue === newState.inputValue && prevState.highlightedIndex === newState.highlightedIndex && prevState.selectedItem === newState.selectedItem;\n}\n\n/**\n * Tracks if it's the first render.\n */\nfunction useIsInitialMount() {\n  var isInitialMountRef = React.useRef(true);\n  React.useEffect(function () {\n    isInitialMountRef.current = false;\n    return function () {\n      isInitialMountRef.current = true;\n    };\n  }, []);\n  return isInitialMountRef.current;\n}\n\n// Shared between all exports.\nvar commonPropTypes = {\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func.isRequired,\n    removeEventListener: PropTypes.func.isRequired,\n    document: PropTypes.shape({\n      createElement: PropTypes.func.isRequired,\n      getElementById: PropTypes.func.isRequired,\n      activeElement: PropTypes.any.isRequired,\n      body: PropTypes.any.isRequired\n    }).isRequired,\n    Node: PropTypes.func.isRequired\n  }),\n  itemToString: PropTypes.func,\n  itemToKey: PropTypes.func,\n  stateReducer: PropTypes.func\n};\n\n// Shared between useSelect, useCombobox, Downshift.\nvar commonDropdownPropTypes = _extends({}, commonPropTypes, {\n  getA11yStatusMessage: PropTypes.func,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  scrollIntoView: PropTypes.func\n});\nfunction downshiftCommonReducer(state, action, stateChangeTypes) {\n  var type = action.type,\n    props = action.props;\n  var changes;\n  switch (type) {\n    case stateChangeTypes.ItemMouseMove:\n      changes = {\n        highlightedIndex: action.disabled ? -1 : action.index\n      };\n      break;\n    case stateChangeTypes.MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n    case stateChangeTypes.ToggleButtonClick:\n    case stateChangeTypes.FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case stateChangeTypes.FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case stateChangeTypes.FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n    case stateChangeTypes.FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n    case stateChangeTypes.FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n    case stateChangeTypes.FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        selectedItem: getDefaultValue$1(props, 'selectedItem'),\n        inputValue: getDefaultValue$1(props, 'inputValue')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nfunction getItemIndexByCharacterKey(_a) {\n  var keysSoFar = _a.keysSoFar,\n    highlightedIndex = _a.highlightedIndex,\n    items = _a.items,\n    itemToString = _a.itemToString,\n    isItemDisabled = _a.isItemDisabled;\n  var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n  for (var index = 0; index < items.length; index++) {\n    // if we already have a search query in progress, we also consider the current highlighted item.\n    var offsetIndex = (index + highlightedIndex + (keysSoFar.length < 2 ? 1 : 0)) % items.length;\n    var item = items[offsetIndex];\n    if (item !== undefined && itemToString(item).toLowerCase().startsWith(lowerCasedKeysSoFar) && !isItemDisabled(item, offsetIndex)) {\n      return offsetIndex;\n    }\n  }\n  return highlightedIndex;\n}\nvar propTypes$2 = __assign(__assign({}, commonDropdownPropTypes), {\n  items: PropTypes.array.isRequired,\n  isItemDisabled: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func\n});\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\nfunction getA11yStatusMessage(_a) {\n  var isOpen = _a.isOpen,\n    resultCount = _a.resultCount,\n    previousResultCount = _a.previousResultCount;\n  if (!isOpen) {\n    return '';\n  }\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n  if (resultCount !== previousResultCount) {\n    return \"\".concat(resultCount, \" result\").concat(resultCount === 1 ? ' is' : 's are', \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\");\n  }\n  return '';\n}\nvar defaultProps$2 = __assign(__assign({}, defaultProps$3), {\n  getA11yStatusMessage: getA11yStatusMessage,\n  isItemDisabled: function () {\n    return false;\n  }\n});\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes$2 = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$2 = function (options, caller) {\n    PropTypes.checkPropTypes(propTypes$2, options, 'prop', caller.name);\n  };\n}\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 0;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 1;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 2;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 3;\nvar ToggleButtonKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_escape__' : 4;\nvar ToggleButtonKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_home__' : 5;\nvar ToggleButtonKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_end__' : 6;\nvar ToggleButtonKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_enter__' : 7;\nvar ToggleButtonKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_space_button__' : 8;\nvar ToggleButtonKeyDownPageUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_page_up__' : 9;\nvar ToggleButtonKeyDownPageDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_page_down__' : 10;\nvar ToggleButtonBlur = process.env.NODE_ENV !== \"production\" ? '__togglebutton_blur__' : 11;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 12;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 13;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 14;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 20;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ToggleButtonClick: ToggleButtonClick$1,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  ToggleButtonKeyDownEscape: ToggleButtonKeyDownEscape,\n  ToggleButtonKeyDownHome: ToggleButtonKeyDownHome,\n  ToggleButtonKeyDownEnd: ToggleButtonKeyDownEnd,\n  ToggleButtonKeyDownEnter: ToggleButtonKeyDownEnter,\n  ToggleButtonKeyDownSpaceButton: ToggleButtonKeyDownSpaceButton,\n  ToggleButtonKeyDownPageUp: ToggleButtonKeyDownPageUp,\n  ToggleButtonKeyDownPageDown: ToggleButtonKeyDownPageDown,\n  ToggleButtonBlur: ToggleButtonBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$2\n});\n\n/* eslint-disable complexity */\nfunction downshiftSelectReducer(state, action) {\n  var _props$items;\n  var type = action.type,\n    props = action.props,\n    altKey = action.altKey;\n  var changes;\n  switch (type) {\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var prevHighlightedIndex = !state.isOpen && state.selectedItem ? props.items.findIndex(function (item) {\n          return props.itemToKey(item) === props.itemToKey(state.selectedItem);\n        }) : state.highlightedIndex;\n        var highlightedIndex = getItemIndexByCharacterKey({\n          keysSoFar: inputValue,\n          highlightedIndex: prevHighlightedIndex,\n          items: props.items,\n          itemToString: props.itemToString,\n          isItemDisabled: props.isItemDisabled\n        });\n        changes = {\n          inputValue: inputValue,\n          highlightedIndex: highlightedIndex,\n          isOpen: true\n        };\n      }\n      break;\n    case ToggleButtonKeyDownArrowDown:\n      {\n        var _highlightedIndex = state.isOpen ? getHighlightedIndex(state.highlightedIndex, 1, props.items, props.isItemDisabled) : altKey && state.selectedItem == null ? -1 : getHighlightedIndexOnOpen(props, state, 1);\n        changes = {\n          highlightedIndex: _highlightedIndex,\n          isOpen: true\n        };\n      }\n      break;\n    case ToggleButtonKeyDownArrowUp:\n      if (state.isOpen && altKey) {\n        changes = getChangesOnSelection(props, state.highlightedIndex, false);\n      } else {\n        var _highlightedIndex2 = state.isOpen ? getHighlightedIndex(state.highlightedIndex, -1, props.items, props.isItemDisabled) : getHighlightedIndexOnOpen(props, state, -1);\n        changes = {\n          highlightedIndex: _highlightedIndex2,\n          isOpen: true\n        };\n      }\n      break;\n    // only triggered when menu is open.\n    case ToggleButtonKeyDownEnter:\n    case ToggleButtonKeyDownSpaceButton:\n      changes = getChangesOnSelection(props, state.highlightedIndex, false);\n      break;\n    case ToggleButtonKeyDownHome:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(0, false, props.items, props.isItemDisabled),\n        isOpen: true\n      };\n      break;\n    case ToggleButtonKeyDownEnd:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(props.items.length - 1, true, props.items, props.isItemDisabled),\n        isOpen: true\n      };\n      break;\n    case ToggleButtonKeyDownPageUp:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, -10, props.items, props.isItemDisabled)\n      };\n      break;\n    case ToggleButtonKeyDownPageDown:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, 10, props.items, props.isItemDisabled)\n      };\n      break;\n    case ToggleButtonKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n    case ToggleButtonBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && ((_props$items = props.items) == null ? void 0 : _props$items.length) && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$2);\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nvar _excluded$2 = [\"onClick\"],\n  _excluded2$2 = [\"onMouseLeave\", \"refKey\", \"ref\"],\n  _excluded3$1 = [\"onBlur\", \"onClick\", \"onPress\", \"onKeyDown\", \"refKey\", \"ref\"],\n  _excluded4$1 = [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"onMouseDown\", \"onPress\", \"refKey\", \"disabled\", \"ref\"];\nuseSelect.stateChangeTypes = stateChangeTypes$2;\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes$2(userProps, useSelect);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps$2, userProps);\n  var items = props.items,\n    scrollIntoView = props.scrollIntoView,\n    environment = props.environment,\n    itemToString = props.itemToString,\n    getA11ySelectionMessage = props.getA11ySelectionMessage,\n    getA11yStatusMessage = props.getA11yStatusMessage;\n  // Initial state depending on controlled props.\n  var _useControlledReducer = useControlledReducer$1(downshiftSelectReducer, props, getInitialState$2, isDropdownsStateEqual),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var isOpen = state.isOpen,\n    highlightedIndex = state.highlightedIndex,\n    selectedItem = state.selectedItem,\n    inputValue = state.inputValue;\n  // Element efs.\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n  // used to keep the inputValue clearTimeout object between renders.\n  var clearTimeoutRef = useRef(null);\n  // prevent id re-generation between renders.\n  var elementIds = useElementIds(props);\n  // used to keep track of how many items we had on previous cycle.\n  var previousResultCountRef = useRef();\n  var isInitialMount = useIsInitialMount();\n  // utility callback to get item element.\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  // Some utils.\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]);\n\n  // Effects.\n  // Sets a11y status message on changes in state.\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Sets a11y status message on changes in selectedItem.\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Scroll on highlighted item if change comes from keyboard.\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n\n  // Sets cleanup for the keysSoFar callback, debounded after 500ms.\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    clearTimeoutRef.current = debounce(function (outerDispatch) {\n      outerDispatch({\n        type: FunctionSetInputValue$1,\n        inputValue: ''\n      });\n    }, 500);\n\n    // Cancel any pending debounced calls on mount\n    return function () {\n      clearTimeoutRef.current.cancel();\n    };\n  }, []);\n\n  // Invokes the keysSoFar callback set up above.\n  useEffect(function () {\n    if (!inputValue) {\n      return;\n    }\n    clearTimeoutRef.current(dispatch);\n  }, [dispatch, inputValue]);\n  useControlPropsValidator({\n    props: props,\n    state: state\n  });\n  useEffect(function () {\n    if (isInitialMount) {\n      return;\n    }\n    previousResultCountRef.current = items.length;\n  });\n  // Focus the toggle button on first render if required.\n  useEffect(function () {\n    var focusOnOpen = getInitialValue$1(props, 'isOpen');\n    if (focusOnOpen && toggleButtonRef.current) {\n      toggleButtonRef.current.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var mouseAndTouchTrackers = useMouseAndTouchTracker(environment, [toggleButtonRef, menuRef], useCallback(function handleBlur() {\n    if (latest.current.state.isOpen) {\n      dispatch({\n        type: ToggleButtonBlur\n      });\n    }\n  }, [dispatch, latest]));\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps');\n  // Reset itemRefs on close.\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]);\n\n  // Event handler functions.\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          altKey: event.altKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          altKey: event.altKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownHome\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownEnd\n        });\n      },\n      Escape: function Escape() {\n        if (latest.current.state.isOpen) {\n          dispatch({\n            type: ToggleButtonKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: latest.current.state.isOpen ? ToggleButtonKeyDownEnter : ToggleButtonClick$1\n        });\n      },\n      PageUp: function PageUp(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: ToggleButtonKeyDownPageUp\n          });\n        }\n      },\n      PageDown: function PageDown(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: ToggleButtonKeyDownPageDown\n          });\n        }\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        var currentState = latest.current.state;\n        if (!currentState.isOpen) {\n          dispatch({\n            type: ToggleButtonClick$1\n          });\n          return;\n        }\n        if (currentState.inputValue) {\n          dispatch({\n            type: ToggleButtonKeyDownCharacter,\n            key: ' '\n          });\n        } else {\n          dispatch({\n            type: ToggleButtonKeyDownSpaceButton\n          });\n        }\n      }\n    };\n  }, [dispatch, latest]);\n\n  // Action functions.\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  // Getter functions.\n  var getLabelProps = useCallback(function (_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      onClick = _ref.onClick,\n      labelProps = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n    var labelHandleClick = function labelHandleClick() {\n      var _toggleButtonRef$curr;\n      (_toggleButtonRef$curr = toggleButtonRef.current) == null || _toggleButtonRef$curr.focus();\n    };\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.toggleButtonId,\n      onClick: callAllEventHandlers(onClick, labelHandleClick)\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp2, _temp3) {\n    var _extends2;\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      onMouseLeave = _ref2.onMouseLeave,\n      _ref2$refKey = _ref2.refKey,\n      refKey = _ref2$refKey === void 0 ? 'ref' : _ref2$refKey,\n      ref = _ref2.ref,\n      rest = _objectWithoutPropertiesLoose(_ref2, _excluded2$2);\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      _ref3$suppressRefErro = _ref3.suppressRefError,\n      suppressRefError = _ref3$suppressRefErro === void 0 ? false : _ref3$suppressRefErro;\n    var menuHandleMouseLeave = function menuHandleMouseLeave() {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    };\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, menuHandleMouseLeave), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getToggleButtonProps = useCallback(function (_temp4, _temp5) {\n    var _extends3;\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n      onBlur = _ref4.onBlur,\n      onClick = _ref4.onClick;\n    _ref4.onPress;\n    var onKeyDown = _ref4.onKeyDown,\n      _ref4$refKey = _ref4.refKey,\n      refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n      ref = _ref4.ref,\n      rest = _objectWithoutPropertiesLoose(_ref4, _excluded3$1);\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n      _ref5$suppressRefErro = _ref5.suppressRefError,\n      suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n    var latestState = latest.current.state;\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n    };\n    var toggleButtonHandleBlur = function toggleButtonHandleBlur() {\n      if (latestState.isOpen && !mouseAndTouchTrackers.isMouseDown) {\n        dispatch({\n          type: ToggleButtonBlur\n        });\n      }\n    };\n    var toggleButtonHandleKeyDown = function toggleButtonHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key\n        });\n      }\n    };\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3['aria-activedescendant'] = latestState.isOpen && latestState.highlightedIndex > -1 ? elementIds.getItemId(latestState.highlightedIndex) : '', _extends3['aria-controls'] = elementIds.menuId, _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends3.id = elementIds.toggleButtonId, _extends3.role = 'combobox', _extends3.tabIndex = 0, _extends3.onBlur = callAllEventHandlers(onBlur, toggleButtonHandleBlur), _extends3), rest);\n    if (!rest.disabled) {\n      /* istanbul ignore if (react-native) */\n      {\n        toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n        toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n      }\n    }\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [dispatch, elementIds, latest, mouseAndTouchTrackers, setGetterPropCallInfo, toggleButtonKeyDownHandlers]);\n  var getItemProps = useCallback(function (_temp6) {\n    var _extends4;\n    var _ref6 = _temp6 === void 0 ? {} : _temp6,\n      itemProp = _ref6.item,\n      indexProp = _ref6.index,\n      onMouseMove = _ref6.onMouseMove,\n      onClick = _ref6.onClick,\n      onMouseDown = _ref6.onMouseDown;\n    _ref6.onPress;\n    var _ref6$refKey = _ref6.refKey,\n      refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n      disabledProp = _ref6.disabled,\n      ref = _ref6.ref,\n      rest = _objectWithoutPropertiesLoose(_ref6, _excluded4$1);\n    if (disabledProp !== undefined) {\n      console.warn('Passing \"disabled\" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useSelect.');\n    }\n    var _latest$current = latest.current,\n      latestState = _latest$current.state,\n      latestProps = _latest$current.props;\n    var _getItemAndIndex = getItemAndIndex(itemProp, indexProp, latestProps.items, 'Pass either item or index to getItemProps!'),\n      item = _getItemAndIndex[0],\n      index = _getItemAndIndex[1];\n    var disabled = latestProps.isItemDisabled(item, index);\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (mouseAndTouchTrackers.isTouchEnd || index === latestState.highlightedIndex) {\n        return;\n      }\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove$1,\n        index: index,\n        disabled: disabled\n      });\n    };\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n    };\n    var itemHandleMouseDown = function itemHandleMouseDown(e) {\n      return e.preventDefault();\n    }; // keep focus on the toggle after item click select.\n\n    var itemProps = _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(index)] = itemNode;\n      }\n    }), _extends4['aria-disabled'] = disabled, _extends4['aria-selected'] = \"\" + (item === latestState.selectedItem), _extends4.id = elementIds.getItemId(index), _extends4.role = 'option', _extends4), rest);\n    if (!disabled) {\n      /* istanbul ignore next (react-native) */\n      {\n        itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n      }\n    }\n    itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n    itemProps.onMouseDown = callAllEventHandlers(onMouseDown, itemHandleMouseDown);\n    return itemProps;\n  }, [latest, elementIds, mouseAndTouchTrackers, shouldScrollRef, dispatch]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownPageUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_page_up__' : 5;\nvar InputKeyDownPageDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_page_down__' : 6;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 7;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 8;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 9;\nvar InputClick = process.env.NODE_ENV !== \"production\" ? '__input_click__' : 10;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 11;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 12;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 13;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 14;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 20;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 22;\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownPageUp: InputKeyDownPageUp,\n  InputKeyDownPageDown: InputKeyDownPageDown,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  InputClick: InputClick,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset$1,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem\n});\nfunction getInitialState$1(props) {\n  var initialState = getInitialState$2(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\nvar propTypes$1 = _extends({}, commonDropdownPropTypes, {\n  items: PropTypes.array.isRequired,\n  isItemDisabled: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  inputId: PropTypes.string,\n  onInputValueChange: PropTypes.func\n});\n\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} props The hook props, also passed to createInitialState.\n * @param {Function} createInitialState Function that returns the initial state.\n * @param {Function} isStateEqual Function that checks if a previous state is equal to the next.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useControlledReducer(reducer, props, createInitialState, isStateEqual) {\n  var previousSelectedItemRef = useRef();\n  var _useEnhancedReducer = useEnhancedReducer(reducer, props, createInitialState, isStateEqual),\n    state = _useEnhancedReducer[0],\n    dispatch = _useEnhancedReducer[1];\n  var isInitialMount = useIsInitialMount();\n  useEffect(function () {\n    if (!isControlledProp(props, 'selectedItem')) {\n      return;\n    }\n    if (!isInitialMount // on first mount we already have the proper inputValue for a initial selected item.\n    ) {\n      var shouldCallDispatch;\n      if (props.selectedItemChanged === undefined) {\n        shouldCallDispatch = props.itemToKey(props.selectedItem) !== props.itemToKey(previousSelectedItemRef.current);\n      } else {\n        console.warn(\"The \\\"selectedItemChanged\\\" is deprecated. Please use \\\"itemToKey instead\\\". https://github.com/downshift-js/downshift/blob/master/src/hooks/useCombobox/README.md#selecteditemchanged\");\n        shouldCallDispatch = props.selectedItemChanged(previousSelectedItemRef.current, props.selectedItem);\n      }\n      if (shouldCallDispatch) {\n        dispatch({\n          type: ControlledPropUpdatedSelectedItem,\n          inputValue: props.itemToString(props.selectedItem)\n        });\n      }\n    }\n    previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state.selectedItem, props.selectedItem]);\n  return [getState(state, props), dispatch];\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes$1 = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$1 = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes$1, options, 'prop', caller.name);\n  };\n}\nvar defaultProps$1 = _extends({}, defaultProps$3, {\n  getA11yStatusMessage: getA11yStatusMessage$1,\n  isItemDisabled: function isItemDisabled() {\n    return false;\n  }\n});\n\n/* eslint-disable complexity */\nfunction downshiftUseComboboxReducer(state, action) {\n  var _props$items;\n  var type = action.type,\n    props = action.props,\n    altKey = action.altKey;\n  var changes;\n  switch (type) {\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getHighlightedIndex(state.highlightedIndex, 1, props.items, props.isItemDisabled, true)\n        };\n      } else {\n        changes = {\n          highlightedIndex: altKey && state.selectedItem == null ? -1 : getHighlightedIndexOnOpen(props, state, 1),\n          isOpen: props.items.length >= 0\n        };\n      }\n      break;\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        if (altKey) {\n          changes = getChangesOnSelection(props, state.highlightedIndex);\n        } else {\n          changes = {\n            highlightedIndex: getHighlightedIndex(state.highlightedIndex, -1, props.items, props.isItemDisabled, true)\n          };\n        }\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1),\n          isOpen: props.items.length >= 0\n        };\n      }\n      break;\n    case InputKeyDownEnter:\n      changes = getChangesOnSelection(props, state.highlightedIndex);\n      break;\n    case InputKeyDownEscape:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, !state.isOpen && {\n        selectedItem: null,\n        inputValue: ''\n      });\n      break;\n    case InputKeyDownPageUp:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, -10, props.items, props.isItemDisabled, true)\n      };\n      break;\n    case InputKeyDownPageDown:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, 10, props.items, props.isItemDisabled, true)\n      };\n      break;\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(0, false, props.items, props.isItemDisabled)\n      };\n      break;\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(props.items.length - 1, true, props.items, props.isItemDisabled)\n      };\n      break;\n    case InputBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && ((_props$items = props.items) == null ? void 0 : _props$items.length) && action.selectItem && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n    case InputClick:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n    case ControlledPropUpdatedSelectedItem:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$1);\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nvar _excluded$1 = [\"onMouseLeave\", \"refKey\", \"ref\"],\n  _excluded2$1 = [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"disabled\"],\n  _excluded3 = [\"onClick\", \"onPress\", \"refKey\", \"ref\"],\n  _excluded4 = [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"onClick\", \"refKey\", \"ref\"];\nuseCombobox.stateChangeTypes = stateChangeTypes$1;\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes$1(userProps, useCombobox);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps$1, userProps);\n  var items = props.items,\n    scrollIntoView = props.scrollIntoView,\n    environment = props.environment,\n    getA11yStatusMessage = props.getA11yStatusMessage,\n    getA11ySelectionMessage = props.getA11ySelectionMessage,\n    itemToString = props.itemToString;\n  // Initial state depending on controlled props.\n  var _useControlledReducer = useControlledReducer(downshiftUseComboboxReducer, props, getInitialState$1, isDropdownsStateEqual),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var isOpen = state.isOpen,\n    highlightedIndex = state.highlightedIndex,\n    selectedItem = state.selectedItem,\n    inputValue = state.inputValue;\n\n  // Element refs.\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var isInitialMount = useIsInitialMount();\n\n  // prevent id re-generation between renders.\n  var elementIds = useElementIds(props);\n  // used to keep track of how many items we had on previous cycle.\n  var previousResultCountRef = useRef();\n  // utility callback to get item element.\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]);\n\n  // Effects.\n  // Sets a11y status message on changes in state.\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Sets a11y status message on changes in selectedItem.\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Scroll on highlighted item if change comes from keyboard.\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n  useControlPropsValidator({\n    props: props,\n    state: state\n  });\n  // Focus the input on first render if required.\n  useEffect(function () {\n    var focusOnOpen = getInitialValue$1(props, 'isOpen');\n    if (focusOnOpen && inputRef.current) {\n      inputRef.current.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(function () {\n    if (!isInitialMount) {\n      previousResultCountRef.current = items.length;\n    }\n  });\n  var mouseAndTouchTrackers = useMouseAndTouchTracker(environment, [toggleButtonRef, menuRef, inputRef], useCallback(function handleBlur() {\n    if (latest.current.state.isOpen) {\n      dispatch({\n        type: InputBlur,\n        selectItem: false\n      });\n    }\n  }, [dispatch, latest]));\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getMenuProps');\n  // Reset itemRefs on close.\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]);\n  // Reset itemRefs on close.\n  useEffect(function () {\n    var _inputRef$current;\n    if (!isOpen || !(environment != null && environment.document) || !(inputRef != null && (_inputRef$current = inputRef.current) != null && _inputRef$current.focus)) {\n      return;\n    }\n    if (environment.document.activeElement !== inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isOpen, environment]);\n\n  /* Event handler functions */\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          altKey: event.altKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          altKey: event.altKey\n        });\n      },\n      Home: function Home(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome\n        });\n      },\n      End: function End(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd\n        });\n      },\n      Escape: function Escape(event) {\n        var latestState = latest.current.state;\n        if (latestState.isOpen || latestState.inputValue || latestState.selectedItem || latestState.highlightedIndex > -1) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var latestState = latest.current.state;\n        // if closed or no highlighted index, do nothing.\n        if (!latestState.isOpen || event.which === 229 // if IME composing, wait for next Enter keydown event.\n        ) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnter\n        });\n      },\n      PageUp: function PageUp(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownPageUp\n          });\n        }\n      },\n      PageDown: function PageDown(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownPageDown\n          });\n        }\n      }\n    };\n  }, [dispatch, latest]);\n\n  // Getter props.\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.inputId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n    var _ref = _temp === void 0 ? {} : _temp,\n      onMouseLeave = _ref.onMouseLeave,\n      _ref$refKey = _ref.refKey,\n      refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n      ref = _ref.ref,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      _ref2$suppressRefErro = _ref2.suppressRefError,\n      suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      itemProp = _ref3.item,\n      indexProp = _ref3.index,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      onMouseMove = _ref3.onMouseMove,\n      onMouseDown = _ref3.onMouseDown,\n      onClick = _ref3.onClick;\n    _ref3.onPress;\n    var disabledProp = _ref3.disabled,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$1);\n    if (disabledProp !== undefined) {\n      console.warn('Passing \"disabled\" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');\n    }\n    var _latest$current = latest.current,\n      latestProps = _latest$current.props,\n      latestState = _latest$current.state;\n    var _getItemAndIndex = getItemAndIndex(itemProp, indexProp, latestProps.items, 'Pass either item or index to getItemProps!'),\n      item = _getItemAndIndex[0],\n      index = _getItemAndIndex[1];\n    var disabled = latestProps.isItemDisabled(item, index);\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (mouseAndTouchTrackers.isTouchEnd || index === latestState.highlightedIndex) {\n        return;\n      }\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index,\n        disabled: disabled\n      });\n    };\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n    };\n    var itemHandleMouseDown = function itemHandleMouseDown(e) {\n      return e.preventDefault();\n    }; // keep focus on the input after item click select.\n\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(index)] = itemNode;\n      }\n    }), _extends3['aria-disabled'] = disabled, _extends3['aria-selected'] = \"\" + (index === latestState.highlightedIndex), _extends3.id = elementIds.getItemId(index), _extends3.role = 'option', _extends3), !disabled && (_ref4 = {}, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, itemHandleClick), _ref4), {\n      onMouseMove: callAllEventHandlers(onMouseMove, itemHandleMouseMove),\n      onMouseDown: callAllEventHandlers(onMouseDown, itemHandleMouseDown)\n    }, rest);\n  }, [dispatch, elementIds, latest, mouseAndTouchTrackers, shouldScrollRef]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n      onClick = _ref5.onClick;\n    _ref5.onPress;\n    var _ref5$refKey = _ref5.refKey,\n      refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n      ref = _ref5.ref,\n      rest = _objectWithoutPropertiesLoose(_ref5, _excluded3);\n    var latestState = latest.current.state;\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick\n      });\n    };\n    return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4['aria-controls'] = elementIds.menuId, _extends4['aria-expanded'] = latestState.isOpen, _extends4.id = elementIds.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    }), rest);\n  }, [dispatch, latest, elementIds]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n      onKeyDown = _ref6.onKeyDown,\n      onChange = _ref6.onChange,\n      onInput = _ref6.onInput,\n      onBlur = _ref6.onBlur;\n    _ref6.onChangeText;\n    var onClick = _ref6.onClick,\n      _ref6$refKey = _ref6.refKey,\n      refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n      ref = _ref6.ref,\n      rest = _objectWithoutPropertiesLoose(_ref6, _excluded4);\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n      _ref7$suppressRefErro = _ref7.suppressRefError,\n      suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n    var inputHandleKeyDown = function inputHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n    var inputHandleChange = function inputHandleChange(event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n    var inputHandleBlur = function inputHandleBlur(event) {\n      /* istanbul ignore else */\n      if (environment != null && environment.document && latestState.isOpen && !mouseAndTouchTrackers.isMouseDown) {\n        var isBlurByTabChange = event.relatedTarget === null && environment.document.activeElement !== environment.document.body;\n        dispatch({\n          type: InputBlur,\n          selectItem: !isBlurByTabChange\n        });\n      }\n    };\n    var inputHandleClick = function inputHandleClick() {\n      dispatch({\n        type: InputClick\n      });\n    };\n\n    /* istanbul ignore next (preact) */\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n    if (!rest.disabled) {\n      var _eventHandlers;\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers.onClick = callAllEventHandlers(onClick, inputHandleClick), _eventHandlers);\n    }\n    return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5['aria-activedescendant'] = latestState.isOpen && latestState.highlightedIndex > -1 ? elementIds.getItemId(latestState.highlightedIndex) : '', _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIds.menuId, _extends5['aria-expanded'] = latestState.isOpen, _extends5['aria-labelledby'] = rest && rest['aria-label'] ? undefined : elementIds.labelId, _extends5.autoComplete = 'off', _extends5.id = elementIds.inputId, _extends5.role = 'combobox', _extends5.value = latestState.inputValue, _extends5), eventHandlers, rest);\n  }, [dispatch, elementIds, environment, inputKeyDownHandlers, latest, mouseAndTouchTrackers, setGetterPropCallInfo]);\n\n  // returns\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\nfunction getInitialValue(props, propKey) {\n  return getInitialValue$1(props, propKey, defaultStateValues);\n}\n\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\nfunction getDefaultValue(props, propKey) {\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\n\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\nfunction getInitialState(props) {\n  var activeIndex = getInitialValue(props, 'activeIndex');\n  var selectedItems = getInitialValue(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n  var element = event.target;\n  if (element instanceof HTMLInputElement &&\n  // if element is a text input\n  element.value !== '' && (\n  // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Returns a message to be added to aria-live region when item is removed.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\nfunction getA11yRemovalMessage(selectionParameters) {\n  var removedSelectedItem = selectionParameters.removedSelectedItem,\n    itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(removedSelectedItem) + \" has been removed.\";\n}\n\n/**\n * Check if a state is equal for taglist, by comparing active index and selected items.\n * Used by useSelect and useCombobox.\n *\n * @param {Object} prevState\n * @param {Object} newState\n * @returns {boolean} Wheather the states are deeply equal.\n */\nfunction isStateEqual(prevState, newState) {\n  return prevState.selectedItems === newState.selectedItems && prevState.activeIndex === newState.activeIndex;\n}\nvar propTypes = _extends({}, commonPropTypes, {\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  getA11yRemovalMessage: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string\n});\nvar defaultProps = {\n  itemToString: defaultProps$3.itemToString,\n  itemToKey: defaultProps$3.itemToKey,\n  stateReducer: defaultProps$3.stateReducer,\n  environment: defaultProps$3.environment,\n  getA11yRemovalMessage: getA11yRemovalMessage,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n};\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes, options, 'prop', caller.name);\n  };\n}\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownClick: DropdownClick,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionReset: FunctionReset\n});\n\n/* eslint-disable complexity */\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n    index = action.index,\n    props = action.props,\n    selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n    selectedItems = state.selectedItems;\n  var changes;\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        if (activeIndex < 0) {\n          break;\n        }\n        var newActiveIndex = activeIndex;\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.findIndex(function (item) {\n          return props.itemToKey(item) === props.itemToKey(selectedItem);\n        });\n        if (selectedItemIndex < 0) {\n          break;\n        }\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n        changes = {\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1)),\n          activeIndex: _newActiveIndex\n        };\n        break;\n      }\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n    case FunctionReset:\n      changes = {\n        activeIndex: getDefaultValue(props, 'activeIndex'),\n        selectedItems: getDefaultValue(props, 'selectedItems')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends({}, state, changes);\n}\nvar _excluded = [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"],\n  _excluded2 = [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"];\nuseMultipleSelection.stateChangeTypes = stateChangeTypes;\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes(userProps, useMultipleSelection);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps, userProps);\n  var getA11yRemovalMessage = props.getA11yRemovalMessage,\n    itemToString = props.itemToString,\n    environment = props.environment,\n    keyNavigationNext = props.keyNavigationNext,\n    keyNavigationPrevious = props.keyNavigationPrevious;\n\n  // Reducer init.\n  var _useControlledReducer = useControlledReducer$1(downshiftMultipleSelectionReducer, props, getInitialState, isStateEqual),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var activeIndex = state.activeIndex,\n    selectedItems = state.selectedItems;\n\n  // Refs.\n  var isInitialMount = useIsInitialMount();\n  var dropdownRef = useRef(null);\n  var previousSelectedItemsRef = useRef(selectedItems);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = [];\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  // Effects.\n  /* Sets a11y status message on changes in selectedItem. */\n  useEffect(function () {\n    if (isInitialMount || false || !(environment != null && environment.document)) {\n      return;\n    }\n    if (selectedItems.length < previousSelectedItemsRef.current.length) {\n      var removedSelectedItem = previousSelectedItemsRef.current.find(function (selectedItem) {\n        return selectedItems.findIndex(function (item) {\n          return props.itemToKey(item) === props.itemToKey(selectedItem);\n        }) < 0;\n      });\n      setStatus(getA11yRemovalMessage({\n        itemToString: itemToString,\n        resultCount: selectedItems.length,\n        removedSelectedItem: removedSelectedItem,\n        activeIndex: activeIndex,\n        activeSelectedItem: selectedItems[activeIndex]\n      }), environment.document);\n    }\n    previousSelectedItemsRef.current = selectedItems;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItems.length]);\n  // Sets focus on active item.\n  useEffect(function () {\n    if (isInitialMount) {\n      return;\n    }\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeIndex]);\n  useControlPropsValidator({\n    props: props,\n    state: state\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps');\n\n  // Event handler functions.\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]);\n\n  // Getter props.\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n    var _ref3 = _temp === void 0 ? {} : _temp,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      onClick = _ref3.onClick,\n      onKeyDown = _ref3.onKeyDown,\n      selectedItemProp = _ref3.selectedItem,\n      indexProp = _ref3.index,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n    var latestState = latest.current.state;\n    var _getItemAndIndex = getItemAndIndex(selectedItemProp, indexProp, latestState.selectedItems, 'Pass either item or index to getSelectedItemProps!'),\n      index = _getItemAndIndex[1];\n    var isFocusable = index > -1 && index === latestState.activeIndex;\n    var selectedItemHandleClick = function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    };\n    var selectedItemHandleKeyDown = function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    };\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = isFocusable ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, selectedItemHandleClick), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, selectedItemHandleKeyDown), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n      _ref4$refKey = _ref4.refKey,\n      refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n      ref = _ref4.ref,\n      onKeyDown = _ref4.onKeyDown,\n      onClick = _ref4.onClick,\n      _ref4$preventKeyActio = _ref4.preventKeyAction,\n      preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n      rest = _objectWithoutPropertiesLoose(_ref4, _excluded2);\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n      _ref5$suppressRefErro = _ref5.suppressRefError,\n      suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n    var dropdownHandleKeyDown = function dropdownHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && dropdownKeyDownHandlers[key]) {\n        dropdownKeyDownHandlers[key](event);\n      }\n    };\n    var dropdownHandleClick = function dropdownHandleClick() {\n      dispatch({\n        type: DropdownClick\n      });\n    };\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, dropdownHandleKeyDown),\n      onClick: callAllEventHandlers(onClick, dropdownHandleClick)\n    }, rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]);\n\n  // returns\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\nexport { Downshift$1 as default, resetIdCounter, useCombobox, useMultipleSelection, useSelect };","map":{"version":3,"names":["_objectWithoutPropertiesLoose","_extends","_assertThisInitialized","_inheritsLoose","PropTypes","React","cloneElement","Component","useRef","useEffect","useCallback","useLayoutEffect","useReducer","useMemo","isForwardRef","compute","__assign","idCounter","cbToCb","cb","noop","scrollIntoView","node","menuNode","actions","boundary","block","scrollMode","forEach","_ref","el","top","left","scrollTop","scrollLeft","isOrContainsNode","parent","child","environment","result","Node","contains","debounce","fn","time","timeoutId","cancel","clearTimeout","wrapper","_len","arguments","length","args","Array","_key","setTimeout","apply","callAllEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","concat","preventDownshiftDefault","hasOwnProperty","nativeEvent","handleRefs","_len4","refs","_key4","ref","current","generateId","String","resetIdCounter","console","warn","getA11yStatusMessage$1","_ref2","isOpen","resultCount","previousResultCount","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","type","getElementProps","props","requiredProp","fnName","propName","error","stateKeys","pickState","state","k","getState","Object","keys","reduce","prevState","key","isControlledProp","undefined","normalizeArrowKey","keyCode","indexOf","isPlainObject","obj","prototype","toString","call","getHighlightedIndex","start","offset","items","isItemDisabled","circular","count","itemsLastIndex","highlightedIndex","getNonDisabledIndex","backwards","index","_index","targetWithinDownshift","target","downshiftElements","checkActiveElement","contextNode","document","activeElement","validateControlledUnchanged","process","env","NODE_ENV","prevProps","nextProps","warningDescription","propKey","cleanupStatus","documentProp","getStatusDiv","textContent","statusDiv","getElementById","createElement","setAttribute","assign","style","border","clip","height","margin","overflow","padding","position","width","body","appendChild","setStatus","status","div","unknown","mouseUp","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","keyDownHome","keyDownEnd","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","controlledPropUpdatedSelectedItem","touchEnd","stateChangeTypes$3","freeze","__proto__","_excluded$4","_excluded2$3","_excluded3$2","_excluded4$2","_excluded5","Downshift","_Component","_props","_this","id","menuId","labelId","inputId","getItemId","itemCount","timeoutIds","internalSetTimeout","filter","i","push","setItemCount","unsetItemCount","_item","currentElementNode","getItemNodeFromIndex","hasAttribute","setHighlightedIndex","otherStateToSet","defaultHighlightedIndex","internalSetState","clearSelection","selectedItem","inputValue","defaultIsOpen","selectItem","item","itemToString","selectItemAtIndex","itemIndex","selectHighlightedItem","stateToSet","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","onInputValueChange","getStateAndHelpers","setState","_newStateToSet","newStateToSet","stateReducer","nextState","hasMoreStateThanType","onStateChange","onSelect","onChange","onUserAction","rootRef","_rootNode","getRootProps","_temp","_temp2","_extends2","_ref$refKey","refKey","rest","_ref2$suppressRefErro","suppressRefError","called","_this$getState","role","keyDownHandlers","ArrowDown","_this2","preventDefault","amount","shiftKey","moveHighlightedIndex","getItemCount","_this2$getState","nextHighlightedIndex","ArrowUp","_this3","_this3$getState","Enter","which","_this$getState2","itemNode","Escape","reset","buttonKeyDownHandlers","_","toggleMenu","inputKeyDownHandlers","Home","_this$getState3","newHighlightedIndex","End","_this$getState4","getToggleButtonProps","_temp3","_ref3","onClick","onPress","onKeyDown","onKeyUp","onBlur","_this$getState5","enabledEventHandlers","buttonHandleClick","buttonHandleKeyDown","buttonHandleKeyUp","buttonHandleBlur","eventHandlers","disabled","_this$props$environme","focus","blurTarget","isMouseDown","getLabelProps","htmlFor","getInputProps","_temp4","_ref4","onInput","onChangeText","onChangeKey","_this$getState6","_eventHandlers","inputHandleChange","inputHandleKeyDown","inputHandleBlur","autoComplete","value","_activeElement$datase","downshiftButtonIsActive","dataset","toggle","menuRef","_menuNode","getMenuProps","_temp5","_temp6","_extends3","_ref5","_ref5$refKey","_ref6","_ref6$suppressRefErro","getItemProps","_temp7","_enabledEventHandlers","_ref7","onMouseMove","onMouseDown","_ref7$item","onSelectKey","customClickHandler","avoidScrolling","clearItems","_ref8","_ref9","_this$getState7","openMenu","closeMenu","updateStatus","_this$props","getA11yStatusMessage","highlightedItem","_this$props2","_this$props2$initialH","initialHighlightedIndex","_highlightedIndex","_this$props2$initialI","initialIsOpen","_isOpen","_this$props2$initialI2","initialInputValue","_inputValue","_this$props2$initialS","initialSelectedItem","_selectedItem","_state","_proto","internalClearTimeouts","getState$1","stateToMerge","scrollHighlightedItemIntoView","_this$getState8","_this$getState9","componentDidMount","_this4","validateGetMenuPropsCalledCorrectly","cleanup","onMouseUp","contextWithinDownshift","onOuterClick","onTouchStart","isTouchMove","onTouchMove","onTouchEnd","addEventListener","removeEventListener","shouldScroll","_ref10","currentHighlightedIndex","_ref11","prevHighlightedIndex","scrollWhenOpen","scrollWhenNavigating","componentDidUpdate","selectedItemChanged","componentWillUnmount","render","children","validateGetRootPropsCalledCorrectly","Error","defaultProps","prevItem","window","stateChangeTypes","propTypes","func","number","bool","any","string","shape","isRequired","Downshift$1","_ref12","_ref13","refKeySpecified","isComposite","_excluded$3","dropdownDefaultStateValues","callOnChangeProps","action","newState","changes","invokeOnChangeHandler","handler","capitalizeString","s","a","getA11ySelectionMessage","selectionParameters","updateA11yStatus","getA11yMessage","useIsomorphicLayoutEffect","useElementIds","toggleButtonId","reactId","useId","elementIdsRef","_ref2$id","getItemAndIndex","itemProp","indexProp","errorMessage","isAcceptedCharacterKey","test","slice","toUpperCase","useLatestRef","val","useEnhancedReducer","reducer","createInitialState","isStateEqual","prevStateRef","actionRef","enhancedReducer","_useReducer","dispatch","propsRef","dispatchWithProps","shouldCallOnChangeProps","useControlledReducer$1","_useEnhancedReducer","defaultProps$3","itemToKey","getDefaultValue$1","defaultStateValues","getInitialValue$1","initialValue","getInitialState$2","findIndex","getHighlightedIndexOnOpen","useMouseAndTouchTracker","downshiftElementRefs","handleBlur","mouseAndTouchTrackersRef","isTouchEnd","map","useGetterPropsCalledChecker","isInitialMountRef","propKeys","getterPropsCalledRef","acc","propCallInfo","elementRef","setGetterPropCallInfo","useA11yMessageSetter","dependencyArray","isInitialMount","useIsInitialMount","useScrollIntoView","itemRefs","menuElement","scrollIntoViewProp","shouldScrollRef","useControlPropsValidator","prevPropsRef","getChangesOnSelection","_props$items","shouldSelect","isDropdownsStateEqual","commonPropTypes","commonDropdownPropTypes","defaultSelectedItem","onSelectedItemChange","onHighlightedIndexChange","onIsOpenChange","downshiftCommonReducer","ItemMouseMove","MenuMouseLeave","ToggleButtonClick","FunctionToggleMenu","FunctionOpenMenu","FunctionCloseMenu","FunctionSetHighlightedIndex","FunctionSetInputValue","FunctionReset","getItemIndexByCharacterKey","_a","keysSoFar","lowerCasedKeysSoFar","toLowerCase","offsetIndex","startsWith","propTypes$2","array","defaultProps$2","validatePropTypes$2","options","caller","checkPropTypes","name","ToggleButtonClick$1","ToggleButtonKeyDownArrowDown","ToggleButtonKeyDownArrowUp","ToggleButtonKeyDownCharacter","ToggleButtonKeyDownEscape","ToggleButtonKeyDownHome","ToggleButtonKeyDownEnd","ToggleButtonKeyDownEnter","ToggleButtonKeyDownSpaceButton","ToggleButtonKeyDownPageUp","ToggleButtonKeyDownPageDown","ToggleButtonBlur","MenuMouseLeave$1","ItemMouseMove$1","ItemClick$1","FunctionToggleMenu$1","FunctionOpenMenu$1","FunctionCloseMenu$1","FunctionSetHighlightedIndex$1","FunctionSelectItem$1","FunctionSetInputValue$1","FunctionReset$2","stateChangeTypes$2","ItemClick","FunctionSelectItem","downshiftSelectReducer","altKey","lowercasedKey","_highlightedIndex2","_excluded$2","_excluded2$2","_excluded3$1","_excluded4$1","useSelect","userProps","_useControlledReducer","toggleButtonRef","clearTimeoutRef","elementIds","previousResultCountRef","latest","outerDispatch","focusOnOpen","mouseAndTouchTrackers","toggleButtonKeyDownHandlers","PageUp","PageDown","currentState","newSelectedItem","setInputValue","newInputValue","labelProps","labelHandleClick","_toggleButtonRef$curr","onMouseLeave","_ref2$refKey","_ref3$suppressRefErro","menuHandleMouseLeave","_ref4$refKey","_ref5$suppressRefErro","latestState","toggleButtonHandleClick","toggleButtonHandleBlur","toggleButtonHandleKeyDown","toggleProps","toggleButtonNode","tabIndex","_extends4","_ref6$refKey","disabledProp","_latest$current","latestProps","_getItemAndIndex","itemHandleMouseMove","itemHandleClick","itemHandleMouseDown","e","itemProps","InputKeyDownArrowDown","InputKeyDownArrowUp","InputKeyDownEscape","InputKeyDownHome","InputKeyDownEnd","InputKeyDownPageUp","InputKeyDownPageDown","InputKeyDownEnter","InputChange","InputBlur","InputClick","FunctionReset$1","ControlledPropUpdatedSelectedItem","stateChangeTypes$1","getInitialState$1","initialState","defaultInputValue","propTypes$1","useControlledReducer","previousSelectedItemRef","shouldCallDispatch","validatePropTypes$1","validatePropTypes","defaultProps$1","downshiftUseComboboxReducer","_excluded$1","_excluded2$1","_excluded3","_excluded4","useCombobox","inputRef","_inputRef$current","_ref3$refKey","_extends5","_ref7$suppressRefErro","isBlurByTabChange","relatedTarget","inputHandleClick","inputNode","activeIndex","selectedItems","getInitialValue","getDefaultValue","getInitialState","isKeyDownOperationPermitted","metaKey","ctrlKey","HTMLInputElement","selectionStart","selectionEnd","getA11yRemovalMessage","removedSelectedItem","itemToStringLocal","initialSelectedItems","defaultSelectedItems","initialActiveIndex","defaultActiveIndex","onActiveIndexChange","onSelectedItemsChange","keyNavigationNext","keyNavigationPrevious","SelectedItemClick","SelectedItemKeyDownDelete","SelectedItemKeyDownBackspace","SelectedItemKeyDownNavigationNext","SelectedItemKeyDownNavigationPrevious","DropdownKeyDownNavigationPrevious","DropdownKeyDownBackspace","DropdownClick","FunctionAddSelectedItem","FunctionRemoveSelectedItem","FunctionSetSelectedItems","FunctionSetActiveIndex","downshiftMultipleSelectionReducer","newActiveIndex","_newActiveIndex","selectedItemIndex","newSelectedItems","_newActiveIndex2","_excluded","_excluded2","useMultipleSelection","dropdownRef","previousSelectedItemsRef","selectedItemRefs","find","activeSelectedItem","selectedItemKeyDownHandlers","Delete","Backspace","dropdownKeyDownHandlers","getSelectedItemProps","selectedItemProp","isFocusable","selectedItemHandleClick","selectedItemHandleKeyDown","selectedItemNode","getDropdownProps","_ref4$preventKeyActio","preventKeyAction","dropdownHandleKeyDown","dropdownHandleClick","dropdownNode","addSelectedItem","removeSelectedItem","setSelectedItems","setActiveIndex","default"],"sources":["/Users/davidguan/Local Sites/e/app/public/wp-content/plugins/drhaiel/ls_uhcc_bot_fe/node_modules/downshift/dist/downshift.esm.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport React, { cloneElement, Component, useRef, useEffect, useCallback, useLayoutEffect, useReducer, useMemo } from 'react';\nimport { isForwardRef } from 'react-is';\nimport { compute } from 'compute-scroll-into-view';\nimport { __assign } from 'tslib';\n\nvar idCounter = 0;\n\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\nfunction noop() {}\n\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n  var actions = compute(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n      top = _ref.top,\n      left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @param {Window} environment The window context where downshift renders.\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\nfunction isOrContainsNode(parent, child, environment) {\n  var result = parent === child || child instanceof environment.Node && parent.contains && parent.contains(child);\n  return result;\n}\n\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\nfunction debounce(fn, time) {\n  var timeoutId;\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\nfunction generateId() {\n  return String(idCounter++);\n}\n\n/**\n * Resets idCounter to 0. Used for SSR.\n */\nfunction resetIdCounter() {\n  // istanbul ignore next\n  if ('useId' in React) {\n    console.warn(\"It is not necessary to call resetIdCounter when using React 18+\");\n    return;\n  }\n  idCounter = 0;\n}\n\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specify if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\nfunction getA11yStatusMessage$1(_ref2) {\n  var isOpen = _ref2.isOpen,\n    resultCount = _ref2.resultCount,\n    previousResultCount = _ref2.previousResultCount;\n  if (!isOpen) {\n    return '';\n  }\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n  return '';\n}\n\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ? /* istanbul ignore next (preact) */arg[0] : arg;\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\nfunction isDOMElement(element) {\n\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\nfunction getElementProps(element) {\n  return element.props;\n}\n\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\nfunction getState(state, props) {\n  if (!state || !props) {\n    return state;\n  }\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n    keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n  return key;\n}\n\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n\n/**\n * Returns the next non-disabled highlightedIndex value.\n *\n * @param {number} start The current highlightedIndex.\n * @param {number} offset The offset from the current highlightedIndex to start searching.\n * @param {unknown[]} items The items array.\n * @param {(item: unknown, index: number) => boolean} isItemDisabled Function that tells if an item is disabled or not.\n * @param {boolean?} circular If the search reaches the end, if it can search again starting from the other end.\n * @returns {number} The next highlightedIndex.\n */\nfunction getHighlightedIndex(start, offset, items, isItemDisabled, circular) {\n  if (circular === void 0) {\n    circular = false;\n  }\n  var count = items.length;\n  if (count === 0) {\n    return -1;\n  }\n  var itemsLastIndex = count - 1;\n  if (typeof start !== 'number' || start < 0 || start > itemsLastIndex) {\n    start = offset > 0 ? -1 : itemsLastIndex + 1;\n  }\n  var current = start + offset;\n  if (current < 0) {\n    current = circular ? itemsLastIndex : 0;\n  } else if (current > itemsLastIndex) {\n    current = circular ? 0 : itemsLastIndex;\n  }\n  var highlightedIndex = getNonDisabledIndex(current, offset < 0, items, isItemDisabled, circular);\n  if (highlightedIndex === -1) {\n    return start >= count ? -1 : start;\n  }\n  return highlightedIndex;\n}\n\n/**\n * Returns the next non-disabled highlightedIndex value.\n *\n * @param {number} start The current highlightedIndex.\n * @param {boolean} backwards If true, it will search backwards from the start.\n * @param {unknown[]} items The items array.\n * @param {(item: unknown, index: number) => boolean} isItemDisabled Function that tells if an item is disabled or not.\n * @param {boolean} circular If the search reaches the end, if it can search again starting from the other end.\n * @returns {number} The next non-disabled index.\n */\nfunction getNonDisabledIndex(start, backwards, items, isItemDisabled, circular) {\n  if (circular === void 0) {\n    circular = false;\n  }\n  var count = items.length;\n  if (backwards) {\n    for (var index = start; index >= 0; index--) {\n      if (!isItemDisabled(items[index], index)) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = start; _index < count; _index++) {\n      if (!isItemDisabled(items[_index], _index)) {\n        return _index;\n      }\n    }\n  }\n  if (circular) {\n    return getNonDisabledIndex(backwards ? count - 1 : 0, backwards, items, isItemDisabled);\n  }\n  return -1;\n}\n\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Window} environment The window context where downshift renders.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\nfunction targetWithinDownshift(target, downshiftElements, environment, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n  return environment && downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target, environment) || checkActiveElement && isOrContainsNode(contextNode, environment.document.activeElement, environment));\n  });\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validateControlledUnchanged = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validateControlledUnchanged = function validateControlledUnchanged(state, prevProps, nextProps) {\n    var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n    Object.keys(state).forEach(function (propKey) {\n      if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n      } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n      }\n    });\n  };\n}\n\nvar cleanupStatus = debounce(function (documentProp) {\n  getStatusDiv(documentProp).textContent = '';\n}, 500);\n\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\nfunction getStatusDiv(documentProp) {\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n  if (statusDiv) {\n    return statusDiv;\n  }\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\nfunction setStatus(status, documentProp) {\n  if (!status || !documentProp) {\n    return;\n  }\n  var div = getStatusDiv(documentProp);\n  div.textContent = status;\n  cleanupStatus(documentProp);\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\n\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar _excluded$4 = [\"refKey\", \"ref\"],\n  _excluded2$3 = [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"],\n  _excluded3$2 = [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"],\n  _excluded4$2 = [\"refKey\", \"ref\"],\n  _excluded5 = [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"];\nvar Downshift = /*#__PURE__*/function () {\n  var Downshift = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n    function Downshift(_props) {\n      var _this;\n      _this = _Component.call(this, _props) || this;\n      // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n      _this.items = [];\n      // itemCount can be changed asynchronously\n      // from within downshift (so it can't come from a prop)\n      // this is why we store it as an instance and use\n      // getItemCount rather than just use items.length\n      // (to support windowing + async)\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n      /**\n       * @param {Function} fn the function to call after the time\n       * @param {Number} time the time to wait\n       */\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n        _this.timeoutIds.push(id);\n      };\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n      _this.isItemDisabled = function (_item, index) {\n        var currentElementNode = _this.getItemNodeFromIndex(index);\n        return currentElementNode && currentElementNode.hasAttribute('disabled');\n      };\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n        if (item == null) {\n          return;\n        }\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n      // any piece of our state can live in two places:\n      // 1. Uncontrolled: it's internal (this.state)\n      //    We will call this.setState to update that state\n      // 2. Controlled: it's external (this.props)\n      //    We will call this.props.onStateChange to update that state\n      //\n      // In addition, we'll call this.props.onChange if the\n      // selectedItem is changed.\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function';\n\n        // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n        }\n        return _this.setState(function (state) {\n          var _newStateToSet;\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet;\n\n          // Your own function that could modify the state that will be set.\n          newStateToSet = _this.props.stateReducer(state, newStateToSet);\n\n          // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem');\n          // this keeps track of the object we want to call with setState\n          var nextState = {};\n          // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n          (_newStateToSet = newStateToSet).type || (_newStateToSet.type = unknown);\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            }\n            // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n            if (key === 'type') {\n              return;\n            }\n            newStateToSet[key];\n            // if it's coming from props, then we don't care to set it internally\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          });\n\n          // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n          }\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)();\n\n          // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          }\n          // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n      //////////////////////////// ROOT\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n        var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, _excluded$4);\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n        // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n        var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : undefined, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ROOT\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n          event.preventDefault();\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                  highlightedIndex = _this2$getState.highlightedIndex;\n                var nextHighlightedIndex = getHighlightedIndex(highlightedIndex, 1, {\n                  length: itemCount\n                }, _this2.isItemDisabled, true);\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n          event.preventDefault();\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                  highlightedIndex = _this3$getState.highlightedIndex;\n                var nextHighlightedIndex = getHighlightedIndex(highlightedIndex, -1, {\n                  length: itemCount\n                }, _this3.isItemDisabled, true);\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n          var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset(_extends({\n            type: keyDownEscape\n          }, !this.state.isOpen && {\n            selectedItem: null,\n            inputValue: ''\n          }));\n        }\n      };\n      //////////////////////////// BUTTON\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this$getState3 = this.getState(),\n            isOpen = _this$getState3.isOpen;\n          if (!isOpen) {\n            return;\n          }\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          }\n\n          // get next non-disabled starting downwards from 0 if that's disabled.\n          var newHighlightedIndex = getNonDisabledIndex(0, false, {\n            length: itemCount\n          }, this.isItemDisabled);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this$getState4 = this.getState(),\n            isOpen = _this$getState4.isOpen;\n          if (!isOpen) {\n            return;\n          }\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          }\n\n          // get next non-disabled starting upwards from last index if that's disabled.\n          var newHighlightedIndex = getNonDisabledIndex(itemCount - 1, true, {\n            length: itemCount\n          }, this.isItemDisabled);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick;\n          _ref3.onPress;\n          var onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$3);\n        var _this$getState5 = _this.getState(),\n          isOpen = _this$getState5.isOpen;\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, rest);\n      };\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault();\n        // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n        /* istanbul ignore if (can't reasonably test this) */\n        if (_this.props.environment) {\n          var _this$props$environme = _this.props.environment.document,\n            body = _this$props$environme.body,\n            activeElement = _this$props$environme.activeElement;\n          if (body && body === activeElement) {\n            event.target.focus();\n          }\n        }\n        // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n        _this.internalSetTimeout(function () {\n          if (_this.isMouseDown || !_this.props.environment) {\n            return;\n          }\n          var activeElement = _this.props.environment.document.activeElement;\n          if ((activeElement == null || activeElement.id !== _this.inputId) && activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n        });\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ BUTTON\n      /////////////////////////////// LABEL\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ LABEL\n      /////////////////////////////// INPUT\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput;\n          _ref4.onChangeText;\n          var rest = _objectWithoutPropertiesLoose(_ref4, _excluded3$2);\n        var onChangeKey;\n        var eventHandlers = {};\n\n        /* istanbul ignore next (preact) */\n        {\n          onChangeKey = 'onChange';\n        }\n        var _this$getState6 = _this.getState(),\n          inputValue = _this$getState6.inputValue,\n          isOpen = _this$getState6.isOpen,\n          highlightedIndex = _this$getState6.highlightedIndex;\n        if (!rest.disabled) {\n          var _eventHandlers;\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : undefined,\n          'aria-controls': isOpen ? _this.menuId : undefined,\n          'aria-labelledby': rest && rest['aria-label'] ? undefined : _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, rest);\n      };\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var _activeElement$datase;\n          if (_this.isMouseDown || !_this.props.environment) {\n            return;\n          }\n          var activeElement = _this.props.environment.document.activeElement;\n          var downshiftButtonIsActive = (activeElement == null || (_activeElement$datase = activeElement.dataset) == null ? void 0 : _activeElement$datase.toggle) && _this._rootNode && _this._rootNode.contains(activeElement);\n          if (!downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ INPUT\n      /////////////////////////////// MENU\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, _excluded4$2);\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? undefined : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ MENU\n      /////////////////////////////// ITEM\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick;\n          _ref7.onPress;\n          var index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ? /* istanbul ignore next */undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, _excluded5);\n        if (index === undefined) {\n          _this.items.push(item);\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            });\n\n            // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n            _this.avoidScrolling = true;\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers);\n\n        // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, rest);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ITEM\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n            isOpen = _this$getState7.isOpen,\n            highlightedIndex = _this$getState7.highlightedIndex;\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n          cbToCb(cb)();\n        });\n      };\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n      _this.updateStatus = debounce(function () {\n        var _this$props;\n        if (!((_this$props = _this.props) != null && (_this$props = _this$props.environment) != null && _this$props.document)) {\n          return;\n        }\n        var state = _this.getState();\n        var item = _this.items[state.highlightedIndex];\n        var resultCount = _this.getItemCount();\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n      var _this$props2 = _this.props,\n        defaultHighlightedIndex = _this$props2.defaultHighlightedIndex,\n        _this$props2$initialH = _this$props2.initialHighlightedIndex,\n        _highlightedIndex = _this$props2$initialH === void 0 ? defaultHighlightedIndex : _this$props2$initialH,\n        defaultIsOpen = _this$props2.defaultIsOpen,\n        _this$props2$initialI = _this$props2.initialIsOpen,\n        _isOpen = _this$props2$initialI === void 0 ? defaultIsOpen : _this$props2$initialI,\n        _this$props2$initialI2 = _this$props2.initialInputValue,\n        _inputValue = _this$props2$initialI2 === void 0 ? '' : _this$props2$initialI2,\n        _this$props2$initialS = _this$props2.initialSelectedItem,\n        _selectedItem = _this$props2$initialS === void 0 ? null : _this$props2$initialS;\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n      _this.state = _state;\n      return _this;\n    }\n    var _proto = Downshift.prototype;\n    /**\n     * Clear all running timeouts\n     */\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */;\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n      return getState(stateToMerge, this.props);\n    };\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n      return itemCount;\n    };\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment ? this.props.environment.document.getElementById(this.getItemId(index)) : null;\n    };\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var itemCount = this.getItemCount();\n      var _this$getState8 = this.getState(),\n        highlightedIndex = _this$getState8.highlightedIndex;\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getHighlightedIndex(highlightedIndex, amount, {\n          length: itemCount\n        }, this.isItemDisabled, true);\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n        highlightedIndex = _this$getState9.highlightedIndex,\n        inputValue = _this$getState9.inputValue,\n        selectedItem = _this$getState9.selectedItem,\n        isOpen = _this$getState9.isOpen;\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    };\n    _proto.componentDidMount = function componentDidMount() {\n      var _this4 = this;\n      /* istanbul ignore if (react-native) */\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n\n      /* istanbul ignore if (react-native or SSR) */\n      if (!this.props.environment) {\n        this.cleanup = function () {\n          _this4.internalClearTimeouts();\n        };\n      } else {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function onMouseDown() {\n          _this4.isMouseDown = true;\n        };\n        var onMouseUp = function onMouseUp(event) {\n          _this4.isMouseDown = false;\n          // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this4._rootNode, _this4._menuNode], _this4.props.environment);\n          if (!contextWithinDownshift && _this4.getState().isOpen) {\n            _this4.reset({\n              type: mouseUp\n            }, function () {\n              return _this4.props.onOuterClick(_this4.getStateAndHelpers());\n            });\n          }\n        };\n        // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n        var onTouchStart = function onTouchStart() {\n          _this4.isTouchMove = false;\n        };\n        var onTouchMove = function onTouchMove() {\n          _this4.isTouchMove = true;\n        };\n        var onTouchEnd = function onTouchEnd(event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this4._rootNode, _this4._menuNode], _this4.props.environment, false);\n          if (!_this4.isTouchMove && !contextWithinDownshift && _this4.getState().isOpen) {\n            _this4.reset({\n              type: touchEnd\n            }, function () {\n              return _this4.props.onOuterClick(_this4.getStateAndHelpers());\n            });\n          }\n        };\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n        this.cleanup = function () {\n          _this4.internalClearTimeouts();\n          _this4.updateStatus.cancel();\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref10.highlightedIndex;\n      var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref11.highlightedIndex;\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      var scrollWhenNavigating = currentHighlightedIndex !== prevHighlightedIndex;\n      return scrollWhenOpen || scrollWhenNavigating;\n    };\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n        if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n\n      /* istanbul ignore else (react-native) */\n      {\n        this.updateStatus();\n      }\n    };\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop);\n      // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n      this.clearItems();\n      // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined;\n      // we do something similar for getMenuProps\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined;\n      // we do something similar for getLabelProps\n      this.getLabelProps.called = false;\n      // and something similar for getInputProps\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n      if (!element) {\n        return null;\n      }\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return /*#__PURE__*/cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n\n      /* istanbul ignore next */\n      return undefined;\n    };\n    return Downshift;\n  }(Component);\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage$1,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: /* istanbul ignore next (ssr) */\n    typeof window === 'undefined' || false ? undefined : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes$3;\n  return Downshift;\n}();\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func.isRequired,\n    removeEventListener: PropTypes.func.isRequired,\n    document: PropTypes.shape({\n      createElement: PropTypes.func.isRequired,\n      getElementById: PropTypes.func.isRequired,\n      activeElement: PropTypes.any.isRequired,\n      body: PropTypes.any.isRequired\n    }).isRequired,\n    Node: PropTypes.func.isRequired\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n} : void 0;\nvar Downshift$1 = Downshift;\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nvar _excluded$3 = [\"highlightedIndex\", \"items\", \"environment\"];\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n    type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, action, state, newState);\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\nfunction invokeOnChangeHandler(key, action, state, newState) {\n  var props = action.props,\n    type = action.type;\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](_extends({\n      type: type\n    }, newState));\n  }\n}\n\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n    itemToString = selectionParameters.itemToString;\n  return selectedItem ? itemToString(selectedItem) + \" has been selected.\" : '';\n}\n\n/**\n * Debounced call for updating the a11y message.\n */\nvar updateA11yStatus = debounce(function (getA11yMessage, document) {\n  setStatus(getA11yMessage(), document);\n}, 200);\n\n// istanbul ignore next\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\n// istanbul ignore next\nvar useElementIds = 'useId' in React // Avoid conditional useId call\n? function useElementIds(_ref) {\n  var id = _ref.id,\n    labelId = _ref.labelId,\n    menuId = _ref.menuId,\n    getItemId = _ref.getItemId,\n    toggleButtonId = _ref.toggleButtonId,\n    inputId = _ref.inputId;\n  // Avoid conditional useId call\n  var reactId = \"downshift-\" + React.useId();\n  if (!id) {\n    id = reactId;\n  }\n  var elementIdsRef = useRef({\n    labelId: labelId || id + \"-label\",\n    menuId: menuId || id + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return id + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || id + \"-toggle-button\",\n    inputId: inputId || id + \"-input\"\n  });\n  return elementIdsRef.current;\n} : function useElementIds(_ref2) {\n  var _ref2$id = _ref2.id,\n    id = _ref2$id === void 0 ? \"downshift-\" + generateId() : _ref2$id,\n    labelId = _ref2.labelId,\n    menuId = _ref2.menuId,\n    getItemId = _ref2.getItemId,\n    toggleButtonId = _ref2.toggleButtonId,\n    inputId = _ref2.inputId;\n  var elementIdsRef = useRef({\n    labelId: labelId || id + \"-label\",\n    menuId: menuId || id + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return id + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || id + \"-toggle-button\",\n    inputId: inputId || id + \"-input\"\n  });\n  return elementIdsRef.current;\n};\nfunction getItemAndIndex(itemProp, indexProp, items, errorMessage) {\n  var item, index;\n  if (itemProp === undefined) {\n    if (indexProp === undefined) {\n      throw new Error(errorMessage);\n    }\n    item = items[indexProp];\n    index = indexProp;\n  } else {\n    index = indexProp === undefined ? items.indexOf(itemProp) : indexProp;\n    item = itemProp;\n  }\n  return [item, index];\n}\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\nfunction useLatestRef(val) {\n  var ref = useRef(val);\n  // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n  ref.current = val;\n  return ref;\n}\n\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} props The hook props, also passed to createInitialState.\n * @param {Function} createInitialState Function that returns the initial state.\n * @param {Function} isStateEqual Function that checks if a previous state is equal to the next.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useEnhancedReducer(reducer, props, createInitialState, isStateEqual) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n  var _useReducer = useReducer(enhancedReducer, props, createInitialState),\n    state = _useReducer[0],\n    dispatch = _useReducer[1];\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    var prevState = getState(prevStateRef.current, action == null ? void 0 : action.props);\n    var shouldCallOnChangeProps = action && prevStateRef.current && !isStateEqual(prevState, state);\n    if (shouldCallOnChangeProps) {\n      callOnChangeProps(action, prevState, state);\n    }\n    prevStateRef.current = state;\n  }, [state, action, isStateEqual]);\n  return [state, dispatchWithProps];\n}\n\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} props The hook props, also passed to createInitialState.\n * @param {Function} createInitialState Function that returns the initial state.\n * @param {Function} isStateEqual Function that checks if a previous state is equal to the next.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useControlledReducer$1(reducer, props, createInitialState, isStateEqual) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, props, createInitialState, isStateEqual),\n    state = _useEnhancedReducer[0],\n    dispatch = _useEnhancedReducer[1];\n  return [getState(state, props), dispatch];\n}\nvar defaultProps$3 = {\n  itemToString: function itemToString(item) {\n    return item ? String(item) : '';\n  },\n  itemToKey: function itemToKey(item) {\n    return item;\n  },\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  environment: /* istanbul ignore next (ssr) */\n  typeof window === 'undefined' || false ? undefined : window\n};\nfunction getDefaultValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n  var defaultValue = props[\"default\" + capitalizeString(propKey)];\n  if (defaultValue !== undefined) {\n    return defaultValue;\n  }\n  return defaultStateValues[propKey];\n}\nfunction getInitialValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n  var value = props[propKey];\n  if (value !== undefined) {\n    return value;\n  }\n  var initialValue = props[\"initial\" + capitalizeString(propKey)];\n  if (initialValue !== undefined) {\n    return initialValue;\n  }\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\nfunction getInitialState$2(props) {\n  var selectedItem = getInitialValue$1(props, 'selectedItem');\n  var isOpen = getInitialValue$1(props, 'isOpen');\n  var highlightedIndex = getInitialValue$1(props, 'highlightedIndex');\n  var inputValue = getInitialValue$1(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem && isOpen ? props.items.findIndex(function (item) {\n      return props.itemToKey(item) === props.itemToKey(selectedItem);\n    }) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nfunction getHighlightedIndexOnOpen(props, state, offset) {\n  var items = props.items,\n    initialHighlightedIndex = props.initialHighlightedIndex,\n    defaultHighlightedIndex = props.defaultHighlightedIndex,\n    itemToKey = props.itemToKey;\n  var selectedItem = state.selectedItem,\n    highlightedIndex = state.highlightedIndex;\n  if (items.length === 0) {\n    return -1;\n  }\n\n  // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n  if (selectedItem) {\n    return items.findIndex(function (item) {\n      return itemToKey(selectedItem) === itemToKey(item);\n    });\n  }\n  if (offset === 0) {\n    return -1;\n  }\n  return offset < 0 ? items.length - 1 : 0;\n}\n/**\n * Tracks mouse and touch events, such as mouseDown, touchMove and touchEnd.\n *\n * @param {Object} environment The environment to add the event listeners to, for instance window.\n * @param {Array<HTMLElement>} downshiftElementRefs The refs for the element that should not trigger a blur action from mouseDown or touchEnd.\n * @param {Function} handleBlur The function that is called if mouseDown or touchEnd occured outside the downshiftElements.\n * @returns {Object} The mouse and touch events information, if any of are happening.\n */\nfunction useMouseAndTouchTracker(environment, downshiftElementRefs, handleBlur) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false,\n    isTouchEnd: false\n  });\n  useEffect(function () {\n    if (!environment) {\n      return noop;\n    }\n    var downshiftElements = downshiftElementRefs.map(function (ref) {\n      return ref.current;\n    });\n    function onMouseDown() {\n      mouseAndTouchTrackersRef.current.isTouchEnd = false; // reset this one.\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    }\n    function onMouseUp(event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n      if (!targetWithinDownshift(event.target, downshiftElements, environment)) {\n        handleBlur();\n      }\n    }\n    function onTouchStart() {\n      mouseAndTouchTrackersRef.current.isTouchEnd = false;\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    }\n    function onTouchMove() {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    }\n    function onTouchEnd(event) {\n      mouseAndTouchTrackersRef.current.isTouchEnd = true;\n      if (!mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, downshiftElements, environment, false)) {\n        handleBlur();\n      }\n    }\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function cleanup() {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- refs don't change\n  }, [environment, handleBlur]);\n  return mouseAndTouchTrackersRef.current;\n}\n\n/* istanbul ignore next */\n// eslint-disable-next-line import/no-mutable-exports\nvar useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n  return noop;\n};\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n    var isInitialMountRef = useRef(true);\n    for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n      propKeys[_key] = arguments[_key];\n    }\n    var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n      acc[propKey] = {};\n      return acc;\n    }, {}));\n    useEffect(function () {\n      Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n        var propCallInfo = getterPropsCalledRef.current[propKey];\n        if (isInitialMountRef.current) {\n          if (!Object.keys(propCallInfo).length) {\n            // eslint-disable-next-line no-console\n            console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n            return;\n          }\n        }\n        var suppressRefError = propCallInfo.suppressRefError,\n          refKey = propCallInfo.refKey,\n          elementRef = propCallInfo.elementRef;\n        if ((!elementRef || !elementRef.current) && !suppressRefError) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n        }\n      });\n      isInitialMountRef.current = false;\n    });\n    var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }, []);\n    return setGetterPropCallInfo;\n  };\n}\nfunction useA11yMessageSetter(getA11yMessage, dependencyArray, _ref3) {\n  var highlightedIndex = _ref3.highlightedIndex,\n    items = _ref3.items,\n    environment = _ref3.environment,\n    rest = _objectWithoutPropertiesLoose(_ref3, _excluded$3);\n  var isInitialMount = useIsInitialMount();\n  // Sets a11y status message on changes in state.\n  useEffect(function () {\n    if (isInitialMount || false || !(environment != null && environment.document)) {\n      return;\n    }\n    updateA11yStatus(function () {\n      return getA11yMessage(_extends({\n        highlightedIndex: highlightedIndex,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length\n      }, rest));\n    }, environment.document);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencyArray);\n}\nfunction useScrollIntoView(_ref4) {\n  var highlightedIndex = _ref4.highlightedIndex,\n    isOpen = _ref4.isOpen,\n    itemRefs = _ref4.itemRefs,\n    getItemNodeFromIndex = _ref4.getItemNodeFromIndex,\n    menuElement = _ref4.menuElement,\n    scrollIntoViewProp = _ref4.scrollIntoView;\n  // used not to scroll on highlight by mouse.\n  var shouldScrollRef = useRef(true);\n  // Scroll on highlighted item if change comes from keyboard.\n  useIsomorphicLayoutEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoViewProp(getItemNodeFromIndex(highlightedIndex), menuElement);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [highlightedIndex]);\n  return shouldScrollRef;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar useControlPropsValidator = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  useControlPropsValidator = function useControlPropsValidator(_ref5) {\n    var props = _ref5.props,\n      state = _ref5.state;\n    // used for checking when props are moving from controlled to uncontrolled.\n    var prevPropsRef = useRef(props);\n    var isInitialMount = useIsInitialMount();\n    useEffect(function () {\n      if (isInitialMount) {\n        return;\n      }\n      validateControlledUnchanged(state, prevPropsRef.current, props);\n      prevPropsRef.current = props;\n    }, [state, props, isInitialMount]);\n  };\n}\n\n/**\n * Handles selection on Enter / Alt + ArrowUp. Closes the menu and resets the highlighted index, unless there is a highlighted.\n * In that case, selects the item and resets to defaults for open state and highlighted idex.\n * @param {Object} props The useCombobox props.\n * @param {number} highlightedIndex The index from the state.\n * @param {boolean} inputValue Also return the input value for state.\n * @returns The changes for the state.\n */\nfunction getChangesOnSelection(props, highlightedIndex, inputValue) {\n  var _props$items;\n  if (inputValue === void 0) {\n    inputValue = true;\n  }\n  var shouldSelect = ((_props$items = props.items) == null ? void 0 : _props$items.length) && highlightedIndex >= 0;\n  return _extends({\n    isOpen: false,\n    highlightedIndex: -1\n  }, shouldSelect && _extends({\n    selectedItem: props.items[highlightedIndex],\n    isOpen: getDefaultValue$1(props, 'isOpen'),\n    highlightedIndex: getDefaultValue$1(props, 'highlightedIndex')\n  }, inputValue && {\n    inputValue: props.itemToString(props.items[highlightedIndex])\n  }));\n}\n\n/**\n * Check if a state is equal for dropdowns, by comparing isOpen, inputValue, highlightedIndex and selected item.\n * Used by useSelect and useCombobox.\n *\n * @param {Object} prevState\n * @param {Object} newState\n * @returns {boolean} Wheather the states are deeply equal.\n */\nfunction isDropdownsStateEqual(prevState, newState) {\n  return prevState.isOpen === newState.isOpen && prevState.inputValue === newState.inputValue && prevState.highlightedIndex === newState.highlightedIndex && prevState.selectedItem === newState.selectedItem;\n}\n\n/**\n * Tracks if it's the first render.\n */\nfunction useIsInitialMount() {\n  var isInitialMountRef = React.useRef(true);\n  React.useEffect(function () {\n    isInitialMountRef.current = false;\n    return function () {\n      isInitialMountRef.current = true;\n    };\n  }, []);\n  return isInitialMountRef.current;\n}\n\n// Shared between all exports.\nvar commonPropTypes = {\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func.isRequired,\n    removeEventListener: PropTypes.func.isRequired,\n    document: PropTypes.shape({\n      createElement: PropTypes.func.isRequired,\n      getElementById: PropTypes.func.isRequired,\n      activeElement: PropTypes.any.isRequired,\n      body: PropTypes.any.isRequired\n    }).isRequired,\n    Node: PropTypes.func.isRequired\n  }),\n  itemToString: PropTypes.func,\n  itemToKey: PropTypes.func,\n  stateReducer: PropTypes.func\n};\n\n// Shared between useSelect, useCombobox, Downshift.\nvar commonDropdownPropTypes = _extends({}, commonPropTypes, {\n  getA11yStatusMessage: PropTypes.func,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  scrollIntoView: PropTypes.func\n});\n\nfunction downshiftCommonReducer(state, action, stateChangeTypes) {\n  var type = action.type,\n    props = action.props;\n  var changes;\n  switch (type) {\n    case stateChangeTypes.ItemMouseMove:\n      changes = {\n        highlightedIndex: action.disabled ? -1 : action.index\n      };\n      break;\n    case stateChangeTypes.MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n    case stateChangeTypes.ToggleButtonClick:\n    case stateChangeTypes.FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case stateChangeTypes.FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case stateChangeTypes.FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n    case stateChangeTypes.FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n    case stateChangeTypes.FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n    case stateChangeTypes.FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        selectedItem: getDefaultValue$1(props, 'selectedItem'),\n        inputValue: getDefaultValue$1(props, 'inputValue')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nfunction getItemIndexByCharacterKey(_a) {\n    var keysSoFar = _a.keysSoFar, highlightedIndex = _a.highlightedIndex, items = _a.items, itemToString = _a.itemToString, isItemDisabled = _a.isItemDisabled;\n    var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n    for (var index = 0; index < items.length; index++) {\n        // if we already have a search query in progress, we also consider the current highlighted item.\n        var offsetIndex = (index + highlightedIndex + (keysSoFar.length < 2 ? 1 : 0)) % items.length;\n        var item = items[offsetIndex];\n        if (item !== undefined &&\n            itemToString(item).toLowerCase().startsWith(lowerCasedKeysSoFar) &&\n            !isItemDisabled(item, offsetIndex)) {\n            return offsetIndex;\n        }\n    }\n    return highlightedIndex;\n}\nvar propTypes$2 = __assign(__assign({}, commonDropdownPropTypes), { items: PropTypes.array.isRequired, isItemDisabled: PropTypes.func, getA11ySelectionMessage: PropTypes.func });\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\nfunction getA11yStatusMessage(_a) {\n    var isOpen = _a.isOpen, resultCount = _a.resultCount, previousResultCount = _a.previousResultCount;\n    if (!isOpen) {\n        return '';\n    }\n    if (!resultCount) {\n        return 'No results are available.';\n    }\n    if (resultCount !== previousResultCount) {\n        return \"\".concat(resultCount, \" result\").concat(resultCount === 1 ? ' is' : 's are', \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\");\n    }\n    return '';\n}\nvar defaultProps$2 = __assign(__assign({}, defaultProps$3), { getA11yStatusMessage: getA11yStatusMessage, isItemDisabled: function () {\n        return false;\n    } });\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes$2 = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n    validatePropTypes$2 = function (options, caller) {\n        PropTypes.checkPropTypes(propTypes$2, options, 'prop', caller.name);\n    };\n}\n\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 0;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 1;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 2;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 3;\nvar ToggleButtonKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_escape__' : 4;\nvar ToggleButtonKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_home__' : 5;\nvar ToggleButtonKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_end__' : 6;\nvar ToggleButtonKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_enter__' : 7;\nvar ToggleButtonKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_space_button__' : 8;\nvar ToggleButtonKeyDownPageUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_page_up__' : 9;\nvar ToggleButtonKeyDownPageDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_page_down__' : 10;\nvar ToggleButtonBlur = process.env.NODE_ENV !== \"production\" ? '__togglebutton_blur__' : 11;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 12;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 13;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 14;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 20;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\n\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ToggleButtonClick: ToggleButtonClick$1,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  ToggleButtonKeyDownEscape: ToggleButtonKeyDownEscape,\n  ToggleButtonKeyDownHome: ToggleButtonKeyDownHome,\n  ToggleButtonKeyDownEnd: ToggleButtonKeyDownEnd,\n  ToggleButtonKeyDownEnter: ToggleButtonKeyDownEnter,\n  ToggleButtonKeyDownSpaceButton: ToggleButtonKeyDownSpaceButton,\n  ToggleButtonKeyDownPageUp: ToggleButtonKeyDownPageUp,\n  ToggleButtonKeyDownPageDown: ToggleButtonKeyDownPageDown,\n  ToggleButtonBlur: ToggleButtonBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$2\n});\n\n/* eslint-disable complexity */\nfunction downshiftSelectReducer(state, action) {\n  var _props$items;\n  var type = action.type,\n    props = action.props,\n    altKey = action.altKey;\n  var changes;\n  switch (type) {\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var prevHighlightedIndex = !state.isOpen && state.selectedItem ? props.items.findIndex(function (item) {\n          return props.itemToKey(item) === props.itemToKey(state.selectedItem);\n        }) : state.highlightedIndex;\n        var highlightedIndex = getItemIndexByCharacterKey({\n          keysSoFar: inputValue,\n          highlightedIndex: prevHighlightedIndex,\n          items: props.items,\n          itemToString: props.itemToString,\n          isItemDisabled: props.isItemDisabled\n        });\n        changes = {\n          inputValue: inputValue,\n          highlightedIndex: highlightedIndex,\n          isOpen: true\n        };\n      }\n      break;\n    case ToggleButtonKeyDownArrowDown:\n      {\n        var _highlightedIndex = state.isOpen ? getHighlightedIndex(state.highlightedIndex, 1, props.items, props.isItemDisabled) : altKey && state.selectedItem == null ? -1 : getHighlightedIndexOnOpen(props, state, 1);\n        changes = {\n          highlightedIndex: _highlightedIndex,\n          isOpen: true\n        };\n      }\n      break;\n    case ToggleButtonKeyDownArrowUp:\n      if (state.isOpen && altKey) {\n        changes = getChangesOnSelection(props, state.highlightedIndex, false);\n      } else {\n        var _highlightedIndex2 = state.isOpen ? getHighlightedIndex(state.highlightedIndex, -1, props.items, props.isItemDisabled) : getHighlightedIndexOnOpen(props, state, -1);\n        changes = {\n          highlightedIndex: _highlightedIndex2,\n          isOpen: true\n        };\n      }\n      break;\n    // only triggered when menu is open.\n    case ToggleButtonKeyDownEnter:\n    case ToggleButtonKeyDownSpaceButton:\n      changes = getChangesOnSelection(props, state.highlightedIndex, false);\n      break;\n    case ToggleButtonKeyDownHome:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(0, false, props.items, props.isItemDisabled),\n        isOpen: true\n      };\n      break;\n    case ToggleButtonKeyDownEnd:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(props.items.length - 1, true, props.items, props.isItemDisabled),\n        isOpen: true\n      };\n      break;\n    case ToggleButtonKeyDownPageUp:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, -10, props.items, props.isItemDisabled)\n      };\n      break;\n    case ToggleButtonKeyDownPageDown:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, 10, props.items, props.isItemDisabled)\n      };\n      break;\n    case ToggleButtonKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n    case ToggleButtonBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && ((_props$items = props.items) == null ? void 0 : _props$items.length) && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$2);\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nvar _excluded$2 = [\"onClick\"],\n  _excluded2$2 = [\"onMouseLeave\", \"refKey\", \"ref\"],\n  _excluded3$1 = [\"onBlur\", \"onClick\", \"onPress\", \"onKeyDown\", \"refKey\", \"ref\"],\n  _excluded4$1 = [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"onMouseDown\", \"onPress\", \"refKey\", \"disabled\", \"ref\"];\nuseSelect.stateChangeTypes = stateChangeTypes$2;\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes$2(userProps, useSelect);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps$2, userProps);\n  var items = props.items,\n    scrollIntoView = props.scrollIntoView,\n    environment = props.environment,\n    itemToString = props.itemToString,\n    getA11ySelectionMessage = props.getA11ySelectionMessage,\n    getA11yStatusMessage = props.getA11yStatusMessage;\n  // Initial state depending on controlled props.\n  var _useControlledReducer = useControlledReducer$1(downshiftSelectReducer, props, getInitialState$2, isDropdownsStateEqual),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var isOpen = state.isOpen,\n    highlightedIndex = state.highlightedIndex,\n    selectedItem = state.selectedItem,\n    inputValue = state.inputValue;\n  // Element efs.\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n  // used to keep the inputValue clearTimeout object between renders.\n  var clearTimeoutRef = useRef(null);\n  // prevent id re-generation between renders.\n  var elementIds = useElementIds(props);\n  // used to keep track of how many items we had on previous cycle.\n  var previousResultCountRef = useRef();\n  var isInitialMount = useIsInitialMount();\n  // utility callback to get item element.\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  // Some utils.\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]);\n\n  // Effects.\n  // Sets a11y status message on changes in state.\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Sets a11y status message on changes in selectedItem.\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Scroll on highlighted item if change comes from keyboard.\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n\n  // Sets cleanup for the keysSoFar callback, debounded after 500ms.\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    clearTimeoutRef.current = debounce(function (outerDispatch) {\n      outerDispatch({\n        type: FunctionSetInputValue$1,\n        inputValue: ''\n      });\n    }, 500);\n\n    // Cancel any pending debounced calls on mount\n    return function () {\n      clearTimeoutRef.current.cancel();\n    };\n  }, []);\n\n  // Invokes the keysSoFar callback set up above.\n  useEffect(function () {\n    if (!inputValue) {\n      return;\n    }\n    clearTimeoutRef.current(dispatch);\n  }, [dispatch, inputValue]);\n  useControlPropsValidator({\n    props: props,\n    state: state\n  });\n  useEffect(function () {\n    if (isInitialMount) {\n      return;\n    }\n    previousResultCountRef.current = items.length;\n  });\n  // Focus the toggle button on first render if required.\n  useEffect(function () {\n    var focusOnOpen = getInitialValue$1(props, 'isOpen');\n    if (focusOnOpen && toggleButtonRef.current) {\n      toggleButtonRef.current.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var mouseAndTouchTrackers = useMouseAndTouchTracker(environment, [toggleButtonRef, menuRef], useCallback(function handleBlur() {\n    if (latest.current.state.isOpen) {\n      dispatch({\n        type: ToggleButtonBlur\n      });\n    }\n  }, [dispatch, latest]));\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps');\n  // Reset itemRefs on close.\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]);\n\n  // Event handler functions.\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          altKey: event.altKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          altKey: event.altKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownHome\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownEnd\n        });\n      },\n      Escape: function Escape() {\n        if (latest.current.state.isOpen) {\n          dispatch({\n            type: ToggleButtonKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: latest.current.state.isOpen ? ToggleButtonKeyDownEnter : ToggleButtonClick$1\n        });\n      },\n      PageUp: function PageUp(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: ToggleButtonKeyDownPageUp\n          });\n        }\n      },\n      PageDown: function PageDown(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: ToggleButtonKeyDownPageDown\n          });\n        }\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        var currentState = latest.current.state;\n        if (!currentState.isOpen) {\n          dispatch({\n            type: ToggleButtonClick$1\n          });\n          return;\n        }\n        if (currentState.inputValue) {\n          dispatch({\n            type: ToggleButtonKeyDownCharacter,\n            key: ' '\n          });\n        } else {\n          dispatch({\n            type: ToggleButtonKeyDownSpaceButton\n          });\n        }\n      }\n    };\n  }, [dispatch, latest]);\n\n  // Action functions.\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  // Getter functions.\n  var getLabelProps = useCallback(function (_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      onClick = _ref.onClick,\n      labelProps = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n    var labelHandleClick = function labelHandleClick() {\n      var _toggleButtonRef$curr;\n      (_toggleButtonRef$curr = toggleButtonRef.current) == null || _toggleButtonRef$curr.focus();\n    };\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.toggleButtonId,\n      onClick: callAllEventHandlers(onClick, labelHandleClick)\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp2, _temp3) {\n    var _extends2;\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      onMouseLeave = _ref2.onMouseLeave,\n      _ref2$refKey = _ref2.refKey,\n      refKey = _ref2$refKey === void 0 ? 'ref' : _ref2$refKey,\n      ref = _ref2.ref,\n      rest = _objectWithoutPropertiesLoose(_ref2, _excluded2$2);\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      _ref3$suppressRefErro = _ref3.suppressRefError,\n      suppressRefError = _ref3$suppressRefErro === void 0 ? false : _ref3$suppressRefErro;\n    var menuHandleMouseLeave = function menuHandleMouseLeave() {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    };\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, menuHandleMouseLeave), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getToggleButtonProps = useCallback(function (_temp4, _temp5) {\n    var _extends3;\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n      onBlur = _ref4.onBlur,\n      onClick = _ref4.onClick;\n      _ref4.onPress;\n      var onKeyDown = _ref4.onKeyDown,\n      _ref4$refKey = _ref4.refKey,\n      refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n      ref = _ref4.ref,\n      rest = _objectWithoutPropertiesLoose(_ref4, _excluded3$1);\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n      _ref5$suppressRefErro = _ref5.suppressRefError,\n      suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n    var latestState = latest.current.state;\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n    };\n    var toggleButtonHandleBlur = function toggleButtonHandleBlur() {\n      if (latestState.isOpen && !mouseAndTouchTrackers.isMouseDown) {\n        dispatch({\n          type: ToggleButtonBlur\n        });\n      }\n    };\n    var toggleButtonHandleKeyDown = function toggleButtonHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key\n        });\n      }\n    };\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3['aria-activedescendant'] = latestState.isOpen && latestState.highlightedIndex > -1 ? elementIds.getItemId(latestState.highlightedIndex) : '', _extends3['aria-controls'] = elementIds.menuId, _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends3.id = elementIds.toggleButtonId, _extends3.role = 'combobox', _extends3.tabIndex = 0, _extends3.onBlur = callAllEventHandlers(onBlur, toggleButtonHandleBlur), _extends3), rest);\n    if (!rest.disabled) {\n      /* istanbul ignore if (react-native) */\n      {\n        toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n        toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n      }\n    }\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [dispatch, elementIds, latest, mouseAndTouchTrackers, setGetterPropCallInfo, toggleButtonKeyDownHandlers]);\n  var getItemProps = useCallback(function (_temp6) {\n    var _extends4;\n    var _ref6 = _temp6 === void 0 ? {} : _temp6,\n      itemProp = _ref6.item,\n      indexProp = _ref6.index,\n      onMouseMove = _ref6.onMouseMove,\n      onClick = _ref6.onClick,\n      onMouseDown = _ref6.onMouseDown;\n      _ref6.onPress;\n      var _ref6$refKey = _ref6.refKey,\n      refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n      disabledProp = _ref6.disabled,\n      ref = _ref6.ref,\n      rest = _objectWithoutPropertiesLoose(_ref6, _excluded4$1);\n    if (disabledProp !== undefined) {\n      console.warn('Passing \"disabled\" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useSelect.');\n    }\n    var _latest$current = latest.current,\n      latestState = _latest$current.state,\n      latestProps = _latest$current.props;\n    var _getItemAndIndex = getItemAndIndex(itemProp, indexProp, latestProps.items, 'Pass either item or index to getItemProps!'),\n      item = _getItemAndIndex[0],\n      index = _getItemAndIndex[1];\n    var disabled = latestProps.isItemDisabled(item, index);\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (mouseAndTouchTrackers.isTouchEnd || index === latestState.highlightedIndex) {\n        return;\n      }\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove$1,\n        index: index,\n        disabled: disabled\n      });\n    };\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n    };\n    var itemHandleMouseDown = function itemHandleMouseDown(e) {\n      return e.preventDefault();\n    }; // keep focus on the toggle after item click select.\n\n    var itemProps = _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(index)] = itemNode;\n      }\n    }), _extends4['aria-disabled'] = disabled, _extends4['aria-selected'] = \"\" + (item === latestState.selectedItem), _extends4.id = elementIds.getItemId(index), _extends4.role = 'option', _extends4), rest);\n    if (!disabled) {\n      /* istanbul ignore next (react-native) */\n      {\n        itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n      }\n    }\n    itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n    itemProps.onMouseDown = callAllEventHandlers(onMouseDown, itemHandleMouseDown);\n    return itemProps;\n  }, [latest, elementIds, mouseAndTouchTrackers, shouldScrollRef, dispatch]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownPageUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_page_up__' : 5;\nvar InputKeyDownPageDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_page_down__' : 6;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 7;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 8;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 9;\nvar InputClick = process.env.NODE_ENV !== \"production\" ? '__input_click__' : 10;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 11;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 12;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 13;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 14;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 20;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 22;\n\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownPageUp: InputKeyDownPageUp,\n  InputKeyDownPageDown: InputKeyDownPageDown,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  InputClick: InputClick,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset$1,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem\n});\n\nfunction getInitialState$1(props) {\n  var initialState = getInitialState$2(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\nvar propTypes$1 = _extends({}, commonDropdownPropTypes, {\n  items: PropTypes.array.isRequired,\n  isItemDisabled: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  inputId: PropTypes.string,\n  onInputValueChange: PropTypes.func\n});\n\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} props The hook props, also passed to createInitialState.\n * @param {Function} createInitialState Function that returns the initial state.\n * @param {Function} isStateEqual Function that checks if a previous state is equal to the next.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useControlledReducer(reducer, props, createInitialState, isStateEqual) {\n  var previousSelectedItemRef = useRef();\n  var _useEnhancedReducer = useEnhancedReducer(reducer, props, createInitialState, isStateEqual),\n    state = _useEnhancedReducer[0],\n    dispatch = _useEnhancedReducer[1];\n  var isInitialMount = useIsInitialMount();\n  useEffect(function () {\n    if (!isControlledProp(props, 'selectedItem')) {\n      return;\n    }\n    if (!isInitialMount // on first mount we already have the proper inputValue for a initial selected item.\n    ) {\n      var shouldCallDispatch;\n      if (props.selectedItemChanged === undefined) {\n        shouldCallDispatch = props.itemToKey(props.selectedItem) !== props.itemToKey(previousSelectedItemRef.current);\n      } else {\n        console.warn(\"The \\\"selectedItemChanged\\\" is deprecated. Please use \\\"itemToKey instead\\\". https://github.com/downshift-js/downshift/blob/master/src/hooks/useCombobox/README.md#selecteditemchanged\");\n        shouldCallDispatch = props.selectedItemChanged(previousSelectedItemRef.current, props.selectedItem);\n      }\n      if (shouldCallDispatch) {\n        dispatch({\n          type: ControlledPropUpdatedSelectedItem,\n          inputValue: props.itemToString(props.selectedItem)\n        });\n      }\n    }\n    previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state.selectedItem, props.selectedItem]);\n  return [getState(state, props), dispatch];\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes$1 = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$1 = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes$1, options, 'prop', caller.name);\n  };\n}\nvar defaultProps$1 = _extends({}, defaultProps$3, {\n  getA11yStatusMessage: getA11yStatusMessage$1,\n  isItemDisabled: function isItemDisabled() {\n    return false;\n  }\n});\n\n/* eslint-disable complexity */\nfunction downshiftUseComboboxReducer(state, action) {\n  var _props$items;\n  var type = action.type,\n    props = action.props,\n    altKey = action.altKey;\n  var changes;\n  switch (type) {\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getHighlightedIndex(state.highlightedIndex, 1, props.items, props.isItemDisabled, true)\n        };\n      } else {\n        changes = {\n          highlightedIndex: altKey && state.selectedItem == null ? -1 : getHighlightedIndexOnOpen(props, state, 1),\n          isOpen: props.items.length >= 0\n        };\n      }\n      break;\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        if (altKey) {\n          changes = getChangesOnSelection(props, state.highlightedIndex);\n        } else {\n          changes = {\n            highlightedIndex: getHighlightedIndex(state.highlightedIndex, -1, props.items, props.isItemDisabled, true)\n          };\n        }\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1),\n          isOpen: props.items.length >= 0\n        };\n      }\n      break;\n    case InputKeyDownEnter:\n      changes = getChangesOnSelection(props, state.highlightedIndex);\n      break;\n    case InputKeyDownEscape:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, !state.isOpen && {\n        selectedItem: null,\n        inputValue: ''\n      });\n      break;\n    case InputKeyDownPageUp:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, -10, props.items, props.isItemDisabled, true)\n      };\n      break;\n    case InputKeyDownPageDown:\n      changes = {\n        highlightedIndex: getHighlightedIndex(state.highlightedIndex, 10, props.items, props.isItemDisabled, true)\n      };\n      break;\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(0, false, props.items, props.isItemDisabled)\n      };\n      break;\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNonDisabledIndex(props.items.length - 1, true, props.items, props.isItemDisabled)\n      };\n      break;\n    case InputBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && ((_props$items = props.items) == null ? void 0 : _props$items.length) && action.selectItem && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n    case InputClick:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n    case ControlledPropUpdatedSelectedItem:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$1);\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nvar _excluded$1 = [\"onMouseLeave\", \"refKey\", \"ref\"],\n  _excluded2$1 = [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"disabled\"],\n  _excluded3 = [\"onClick\", \"onPress\", \"refKey\", \"ref\"],\n  _excluded4 = [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"onClick\", \"refKey\", \"ref\"];\nuseCombobox.stateChangeTypes = stateChangeTypes$1;\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes$1(userProps, useCombobox);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps$1, userProps);\n  var items = props.items,\n    scrollIntoView = props.scrollIntoView,\n    environment = props.environment,\n    getA11yStatusMessage = props.getA11yStatusMessage,\n    getA11ySelectionMessage = props.getA11ySelectionMessage,\n    itemToString = props.itemToString;\n  // Initial state depending on controlled props.\n  var _useControlledReducer = useControlledReducer(downshiftUseComboboxReducer, props, getInitialState$1, isDropdownsStateEqual),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var isOpen = state.isOpen,\n    highlightedIndex = state.highlightedIndex,\n    selectedItem = state.selectedItem,\n    inputValue = state.inputValue;\n\n  // Element refs.\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var isInitialMount = useIsInitialMount();\n\n  // prevent id re-generation between renders.\n  var elementIds = useElementIds(props);\n  // used to keep track of how many items we had on previous cycle.\n  var previousResultCountRef = useRef();\n  // utility callback to get item element.\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]);\n\n  // Effects.\n  // Sets a11y status message on changes in state.\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Sets a11y status message on changes in selectedItem.\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Scroll on highlighted item if change comes from keyboard.\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n  useControlPropsValidator({\n    props: props,\n    state: state\n  });\n  // Focus the input on first render if required.\n  useEffect(function () {\n    var focusOnOpen = getInitialValue$1(props, 'isOpen');\n    if (focusOnOpen && inputRef.current) {\n      inputRef.current.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(function () {\n    if (!isInitialMount) {\n      previousResultCountRef.current = items.length;\n    }\n  });\n  var mouseAndTouchTrackers = useMouseAndTouchTracker(environment, [toggleButtonRef, menuRef, inputRef], useCallback(function handleBlur() {\n    if (latest.current.state.isOpen) {\n      dispatch({\n        type: InputBlur,\n        selectItem: false\n      });\n    }\n  }, [dispatch, latest]));\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getMenuProps');\n  // Reset itemRefs on close.\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]);\n  // Reset itemRefs on close.\n  useEffect(function () {\n    var _inputRef$current;\n    if (!isOpen || !(environment != null && environment.document) || !(inputRef != null && (_inputRef$current = inputRef.current) != null && _inputRef$current.focus)) {\n      return;\n    }\n    if (environment.document.activeElement !== inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isOpen, environment]);\n\n  /* Event handler functions */\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          altKey: event.altKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          altKey: event.altKey\n        });\n      },\n      Home: function Home(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome\n        });\n      },\n      End: function End(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd\n        });\n      },\n      Escape: function Escape(event) {\n        var latestState = latest.current.state;\n        if (latestState.isOpen || latestState.inputValue || latestState.selectedItem || latestState.highlightedIndex > -1) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var latestState = latest.current.state;\n        // if closed or no highlighted index, do nothing.\n        if (!latestState.isOpen || event.which === 229 // if IME composing, wait for next Enter keydown event.\n        ) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnter\n        });\n      },\n      PageUp: function PageUp(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownPageUp\n          });\n        }\n      },\n      PageDown: function PageDown(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownPageDown\n          });\n        }\n      }\n    };\n  }, [dispatch, latest]);\n\n  // Getter props.\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.inputId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n    var _ref = _temp === void 0 ? {} : _temp,\n      onMouseLeave = _ref.onMouseLeave,\n      _ref$refKey = _ref.refKey,\n      refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n      ref = _ref.ref,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      _ref2$suppressRefErro = _ref2.suppressRefError,\n      suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      itemProp = _ref3.item,\n      indexProp = _ref3.index,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      onMouseMove = _ref3.onMouseMove,\n      onMouseDown = _ref3.onMouseDown,\n      onClick = _ref3.onClick;\n      _ref3.onPress;\n      var disabledProp = _ref3.disabled,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$1);\n    if (disabledProp !== undefined) {\n      console.warn('Passing \"disabled\" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');\n    }\n    var _latest$current = latest.current,\n      latestProps = _latest$current.props,\n      latestState = _latest$current.state;\n    var _getItemAndIndex = getItemAndIndex(itemProp, indexProp, latestProps.items, 'Pass either item or index to getItemProps!'),\n      item = _getItemAndIndex[0],\n      index = _getItemAndIndex[1];\n    var disabled = latestProps.isItemDisabled(item, index);\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (mouseAndTouchTrackers.isTouchEnd || index === latestState.highlightedIndex) {\n        return;\n      }\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index,\n        disabled: disabled\n      });\n    };\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n    };\n    var itemHandleMouseDown = function itemHandleMouseDown(e) {\n      return e.preventDefault();\n    }; // keep focus on the input after item click select.\n\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(index)] = itemNode;\n      }\n    }), _extends3['aria-disabled'] = disabled, _extends3['aria-selected'] = \"\" + (index === latestState.highlightedIndex), _extends3.id = elementIds.getItemId(index), _extends3.role = 'option', _extends3), !disabled && (_ref4 = {}, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, itemHandleClick), _ref4), {\n      onMouseMove: callAllEventHandlers(onMouseMove, itemHandleMouseMove),\n      onMouseDown: callAllEventHandlers(onMouseDown, itemHandleMouseDown)\n    }, rest);\n  }, [dispatch, elementIds, latest, mouseAndTouchTrackers, shouldScrollRef]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n      onClick = _ref5.onClick;\n      _ref5.onPress;\n      var _ref5$refKey = _ref5.refKey,\n      refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n      ref = _ref5.ref,\n      rest = _objectWithoutPropertiesLoose(_ref5, _excluded3);\n    var latestState = latest.current.state;\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick\n      });\n    };\n    return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4['aria-controls'] = elementIds.menuId, _extends4['aria-expanded'] = latestState.isOpen, _extends4.id = elementIds.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    }), rest);\n  }, [dispatch, latest, elementIds]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n      onKeyDown = _ref6.onKeyDown,\n      onChange = _ref6.onChange,\n      onInput = _ref6.onInput,\n      onBlur = _ref6.onBlur;\n      _ref6.onChangeText;\n      var onClick = _ref6.onClick,\n      _ref6$refKey = _ref6.refKey,\n      refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n      ref = _ref6.ref,\n      rest = _objectWithoutPropertiesLoose(_ref6, _excluded4);\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n      _ref7$suppressRefErro = _ref7.suppressRefError,\n      suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n    var inputHandleKeyDown = function inputHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n    var inputHandleChange = function inputHandleChange(event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n    var inputHandleBlur = function inputHandleBlur(event) {\n      /* istanbul ignore else */\n      if (environment != null && environment.document && latestState.isOpen && !mouseAndTouchTrackers.isMouseDown) {\n        var isBlurByTabChange = event.relatedTarget === null && environment.document.activeElement !== environment.document.body;\n        dispatch({\n          type: InputBlur,\n          selectItem: !isBlurByTabChange\n        });\n      }\n    };\n    var inputHandleClick = function inputHandleClick() {\n      dispatch({\n        type: InputClick\n      });\n    };\n\n    /* istanbul ignore next (preact) */\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n    if (!rest.disabled) {\n      var _eventHandlers;\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers.onClick = callAllEventHandlers(onClick, inputHandleClick), _eventHandlers);\n    }\n    return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5['aria-activedescendant'] = latestState.isOpen && latestState.highlightedIndex > -1 ? elementIds.getItemId(latestState.highlightedIndex) : '', _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIds.menuId, _extends5['aria-expanded'] = latestState.isOpen, _extends5['aria-labelledby'] = rest && rest['aria-label'] ? undefined : elementIds.labelId, _extends5.autoComplete = 'off', _extends5.id = elementIds.inputId, _extends5.role = 'combobox', _extends5.value = latestState.inputValue, _extends5), eventHandlers, rest);\n  }, [dispatch, elementIds, environment, inputKeyDownHandlers, latest, mouseAndTouchTrackers, setGetterPropCallInfo]);\n\n  // returns\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\nfunction getInitialValue(props, propKey) {\n  return getInitialValue$1(props, propKey, defaultStateValues);\n}\n\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\nfunction getDefaultValue(props, propKey) {\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\n\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\nfunction getInitialState(props) {\n  var activeIndex = getInitialValue(props, 'activeIndex');\n  var selectedItems = getInitialValue(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n  var element = event.target;\n  if (element instanceof HTMLInputElement &&\n  // if element is a text input\n  element.value !== '' && (\n  // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Returns a message to be added to aria-live region when item is removed.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\nfunction getA11yRemovalMessage(selectionParameters) {\n  var removedSelectedItem = selectionParameters.removedSelectedItem,\n    itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(removedSelectedItem) + \" has been removed.\";\n}\n\n/**\n * Check if a state is equal for taglist, by comparing active index and selected items.\n * Used by useSelect and useCombobox.\n *\n * @param {Object} prevState\n * @param {Object} newState\n * @returns {boolean} Wheather the states are deeply equal.\n */\nfunction isStateEqual(prevState, newState) {\n  return prevState.selectedItems === newState.selectedItems && prevState.activeIndex === newState.activeIndex;\n}\nvar propTypes = _extends({}, commonPropTypes, {\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  getA11yRemovalMessage: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string\n});\nvar defaultProps = {\n  itemToString: defaultProps$3.itemToString,\n  itemToKey: defaultProps$3.itemToKey,\n  stateReducer: defaultProps$3.stateReducer,\n  environment: defaultProps$3.environment,\n  getA11yRemovalMessage: getA11yRemovalMessage,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n};\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes, options, 'prop', caller.name);\n  };\n}\n\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\n\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownClick: DropdownClick,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionReset: FunctionReset\n});\n\n/* eslint-disable complexity */\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n    index = action.index,\n    props = action.props,\n    selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n    selectedItems = state.selectedItems;\n  var changes;\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        if (activeIndex < 0) {\n          break;\n        }\n        var newActiveIndex = activeIndex;\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.findIndex(function (item) {\n          return props.itemToKey(item) === props.itemToKey(selectedItem);\n        });\n        if (selectedItemIndex < 0) {\n          break;\n        }\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n        changes = {\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1)),\n          activeIndex: _newActiveIndex\n        };\n        break;\n      }\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n    case FunctionReset:\n      changes = {\n        activeIndex: getDefaultValue(props, 'activeIndex'),\n        selectedItems: getDefaultValue(props, 'selectedItems')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends({}, state, changes);\n}\n\nvar _excluded = [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"],\n  _excluded2 = [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"];\nuseMultipleSelection.stateChangeTypes = stateChangeTypes;\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes(userProps, useMultipleSelection);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps, userProps);\n  var getA11yRemovalMessage = props.getA11yRemovalMessage,\n    itemToString = props.itemToString,\n    environment = props.environment,\n    keyNavigationNext = props.keyNavigationNext,\n    keyNavigationPrevious = props.keyNavigationPrevious;\n\n  // Reducer init.\n  var _useControlledReducer = useControlledReducer$1(downshiftMultipleSelectionReducer, props, getInitialState, isStateEqual),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var activeIndex = state.activeIndex,\n    selectedItems = state.selectedItems;\n\n  // Refs.\n  var isInitialMount = useIsInitialMount();\n  var dropdownRef = useRef(null);\n  var previousSelectedItemsRef = useRef(selectedItems);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = [];\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  // Effects.\n  /* Sets a11y status message on changes in selectedItem. */\n  useEffect(function () {\n    if (isInitialMount || false || !(environment != null && environment.document)) {\n      return;\n    }\n    if (selectedItems.length < previousSelectedItemsRef.current.length) {\n      var removedSelectedItem = previousSelectedItemsRef.current.find(function (selectedItem) {\n        return selectedItems.findIndex(function (item) {\n          return props.itemToKey(item) === props.itemToKey(selectedItem);\n        }) < 0;\n      });\n      setStatus(getA11yRemovalMessage({\n        itemToString: itemToString,\n        resultCount: selectedItems.length,\n        removedSelectedItem: removedSelectedItem,\n        activeIndex: activeIndex,\n        activeSelectedItem: selectedItems[activeIndex]\n      }), environment.document);\n    }\n    previousSelectedItemsRef.current = selectedItems;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItems.length]);\n  // Sets focus on active item.\n  useEffect(function () {\n    if (isInitialMount) {\n      return;\n    }\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeIndex]);\n  useControlPropsValidator({\n    props: props,\n    state: state\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps');\n\n  // Event handler functions.\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]);\n\n  // Getter props.\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n    var _ref3 = _temp === void 0 ? {} : _temp,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      onClick = _ref3.onClick,\n      onKeyDown = _ref3.onKeyDown,\n      selectedItemProp = _ref3.selectedItem,\n      indexProp = _ref3.index,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n    var latestState = latest.current.state;\n    var _getItemAndIndex = getItemAndIndex(selectedItemProp, indexProp, latestState.selectedItems, 'Pass either item or index to getSelectedItemProps!'),\n      index = _getItemAndIndex[1];\n    var isFocusable = index > -1 && index === latestState.activeIndex;\n    var selectedItemHandleClick = function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    };\n    var selectedItemHandleKeyDown = function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    };\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = isFocusable ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, selectedItemHandleClick), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, selectedItemHandleKeyDown), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n      _ref4$refKey = _ref4.refKey,\n      refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n      ref = _ref4.ref,\n      onKeyDown = _ref4.onKeyDown,\n      onClick = _ref4.onClick,\n      _ref4$preventKeyActio = _ref4.preventKeyAction,\n      preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n      rest = _objectWithoutPropertiesLoose(_ref4, _excluded2);\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n      _ref5$suppressRefErro = _ref5.suppressRefError,\n      suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n    var dropdownHandleKeyDown = function dropdownHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && dropdownKeyDownHandlers[key]) {\n        dropdownKeyDownHandlers[key](event);\n      }\n    };\n    var dropdownHandleClick = function dropdownHandleClick() {\n      dispatch({\n        type: DropdownClick\n      });\n    };\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, dropdownHandleKeyDown),\n      onClick: callAllEventHandlers(onClick, dropdownHandleClick)\n    }, rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]);\n\n  // returns\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\n\nexport { Downshift$1 as default, resetIdCounter, useCombobox, useMultipleSelection, useSelect };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}